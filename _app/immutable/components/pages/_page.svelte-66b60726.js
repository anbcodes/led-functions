import{S as Fe,i as Je,s as Qe,k as v,q as O,a as V,l as m,m as g,r as T,h as u,c as C,n as s,I as q,b as N,G as o,J as B,B as be,K as Ke,L as Ve,o as Ye,u as oe,M as Z,N as Pe}from"../../chunks/index-f6eecf18.js";const se={INVALID:0,SIN:1,ADD:2,SUB:3,MUL:4,DIV:5,POW:6,MOD:7,IF:8,EQ:9,GT:10,LT:11,AND:12,OR:13,VAL:14,VAR_T:15,VAR_I:16,END:17},Xe=se,Ze=e=>e.split("").map((t,r)=>t==="("?{type:"OPEN_PARAN",rawValue:t,index:r}:t===")"?{type:"CLOSE_PARAN",rawValue:t,index:r}:t===" "?{type:"WHITESPACE",rawValue:t,index:r}:t==="+"?{type:"OPERATOR",operator:"ADD",rawValue:t,index:r}:t==="-"?{type:"OPERATOR",operator:"SUB",rawValue:t,index:r}:t==="*"?{type:"OPERATOR",operator:"MUL",rawValue:t,index:r}:t==="/"?{type:"OPERATOR",operator:"DIV",rawValue:t,index:r}:t==="%"?{type:"OPERATOR",operator:"MOD",rawValue:t,index:r}:t==="^"?{type:"OPERATOR",operator:"POW",rawValue:t,index:r}:t===">"?{type:"OPERATOR",operator:"GT",rawValue:t,index:r}:t==="<"?{type:"OPERATOR",operator:"LT",rawValue:t,index:r}:t==="="?{type:"OPERATOR",operator:"EQ",rawValue:t,index:r}:t===","?{type:"OPERATOR",operator:"SEP",rawValue:t,index:r}:t==="&"?{type:"OPERATOR",operator:"AND",rawValue:t,index:r}:t==="|"?{type:"OPERATOR",operator:"OR",rawValue:t,index:r}:{type:"LITERAL",value:t,rawValue:t,index:r}),je=[["SEP"],["AND","OR"],["GT","LT","EQ"],["MOD"],["ADD","SUB"],["DIV","MUL"]];class ie extends Error{constructor(t,r){super(t),this.index=r}}const de=(e,t)=>{if(e.length===0)throw new ie("Expected an expression",t);for(let i=0;i<je.length;i++){const c=je[i];let _=0;for(let f=0;f<e.length;f++){const l=e[f];if(l.type==="OPEN_PARAN"&&(_+=1),l.type==="CLOSE_PARAN"&&(_-=1),l.type==="OPERATOR"&&_==0&&c.includes(l.operator))return{type:"operator",op:l.operator,a:de(e.slice(0,f),e[0].index+1),b:de(e.slice(f+1),l.index+1),index:l.index}}}let r="",p=-1;for(let i=0;i<e.length;i++){const c=e[i];if(c.type==="LITERAL"&&(r+=c.value,p===-1&&(p=c.index)),c.type==="OPEN_PARAN"){if(e.slice(-1)[0].type!=="CLOSE_PARAN")throw new ie("Unmatched opening parenthesis",c.index);if(r){const _=de(e.slice(i+1,-1),c.index),f=[],l=y=>{y.type==="operator"&&y.op==="SEP"?(l(y.a),l(y.b)):f.push(y)};return l(_),{type:"call",name:r,args:f,index:p}}else return de(e.slice(i+1,-1),c.index)}}const d=e.find(i=>i.type!=="LITERAL");if(d)throw new ie(`Unexpected token: ${d.rawValue}`,d.index);return r=e.map(i=>i.value).join(""),isNaN(parseInt(r,10))?{type:"variable",name:r,index:e[0].index}:{type:"value",val:parseInt(r,10),index:e[0].index}},ne=e=>{if(e.type==="call"){if(e.name==="if")return[...ne(e.args[0]),...ne(e.args[1]),...ne(e.args[2]),se.IF];if(e.name==="sin")return[...ne(e.args[0]),se.SIN];throw new ie(`Invalid function: ${e.name}`,e.index)}else if(e.type==="operator"){const t=Xe[e.op];if(t===void 0)throw new ie(`Invalid operator: ${e.op}`,e.index);return[...ne(e.a),...ne(e.b),t]}else{if(e.type==="value")return[se.VAL,e.val];if(e.type==="variable"){if(e.name==="i")return[se.VAR_I];if(e.name==="t")return[se.VAR_T];throw new ie(`Unknown variable: ${e.name}`,e.index)}else throw new Error("INVALID TYPE")}},qe=e=>{try{const t=Ze(e),r=de(t.filter(d=>d.type!=="WHITESPACE"),0);return{compiled:ne(r)}}catch(t){if(t instanceof ie)return{error:`Error: ${t.message}
    ${e}
    ${" ".repeat(t.index)}^`,errorRaw:t};throw t}};function We(e,t,r){const p=e.slice();return p[21]=t[r],p[23]=r,p}function Ge(e){let t,r=e[21].name+"",p,d,i,c;function _(){return e[7](e[21])}return{c(){t=v("button"),p=O(r),this.h()},l(f){t=m(f,"BUTTON",{class:!0});var l=g(t);p=T(l,r),l.forEach(u),this.h()},h(){s(t,"class",d="border-gray-800 p-2 mx-2 border-solid border-b "+(e[21]===e[1]?"":"hover:bg-gray-200")+" active:bg-gray-300"),q(t,"bg-gray-300",e[21]===e[1]),q(t,"border-t",e[23]===0)},m(f,l){N(f,t,l),o(t,p),i||(c=B(t,"click",_),i=!0)},p(f,l){e=f,l&1&&r!==(r=e[21].name+"")&&oe(p,r),l&3&&d!==(d="border-gray-800 p-2 mx-2 border-solid border-b "+(e[21]===e[1]?"":"hover:bg-gray-200")+" active:bg-gray-300")&&s(t,"class",d),l&3&&q(t,"bg-gray-300",e[21]===e[1]),l&3&&q(t,"border-t",e[23]===0)},d(f){f&&u(t),i=!1,c()}}}function He(e){let t,r,p,d,i,c,_,f,l,y,L,W,E,J,S,Q,z=e[1].h.value+"",x,M,G,H=e[1].h.error+"",K,j,a,b,n,h,w,I,k,D=e[1].s.value+"",$,ee,Y,X=e[1].s.error+"",te,re,le,ue,_e,U,Ee,fe,ce=e[1].v.error+"",he,ge,ae,ye,pe=e[1].v.value+"",ve,we,Ce;function Ne(R,A){return R[2]?et:$e}let me=Ne(e),F=me(e);return{c(){t=v("div"),r=v("button"),p=O("Back"),d=V(),i=v("div"),F.c(),c=V(),_=v("input"),f=V(),l=v("div"),y=v("div"),L=v("label"),W=O("h = "),E=v("input"),J=V(),S=v("pre"),Q=O("    "),x=O(z),M=V(),G=v("pre"),K=O(H),j=V(),a=v("div"),b=v("label"),n=O("s = "),h=v("input"),w=V(),I=v("pre"),k=O("    "),$=O(D),ee=V(),Y=v("pre"),te=O(X),re=V(),le=v("div"),ue=v("label"),_e=O("v = "),U=v("input"),Ee=V(),fe=v("pre"),he=O(ce),ge=V(),ae=v("pre"),ye=O("    "),ve=O(pe),this.h()},l(R){t=m(R,"DIV",{class:!0});var A=g(t);r=m(A,"BUTTON",{class:!0});var Le=g(r);p=T(Le,"Back"),Le.forEach(u),d=C(A),i=m(A,"DIV",{class:!0});var Se=g(i);F.l(Se),Se.forEach(u),A.forEach(u),c=C(R),_=m(R,"INPUT",{type:!0,class:!0}),f=C(R),l=m(R,"DIV",{class:!0});var P=g(l);y=m(P,"DIV",{class:!0});var Ae=g(y);L=m(Ae,"LABEL",{for:!0});var ke=g(L);W=T(ke,"h = "),ke.forEach(u),E=m(Ae,"INPUT",{name:!0,class:!0,type:!0,autocomplete:!0,autocorrect:!0,autocapitalize:!0,spellcheck:!0}),Ae.forEach(u),J=C(P),S=m(P,"PRE",{class:!0});var Re=g(S);Q=T(Re,"    "),x=T(Re,z),Re.forEach(u),M=C(P),G=m(P,"PRE",{});var Ue=g(G);K=T(Ue,H),Ue.forEach(u),j=C(P),a=m(P,"DIV",{class:!0});var Oe=g(a);b=m(Oe,"LABEL",{for:!0});var xe=g(b);n=T(xe,"s = "),xe.forEach(u),h=m(Oe,"INPUT",{name:!0,class:!0,type:!0,autocomplete:!0,autocorrect:!0,autocapitalize:!0,spellcheck:!0}),Oe.forEach(u),w=C(P),I=m(P,"PRE",{class:!0});var Te=g(I);k=T(Te,"    "),$=T(Te,D),Te.forEach(u),ee=C(P),Y=m(P,"PRE",{});var Be=g(Y);te=T(Be,X),Be.forEach(u),re=C(P),le=m(P,"DIV",{class:!0});var Ie=g(le);ue=m(Ie,"LABEL",{for:!0});var Me=g(ue);_e=T(Me,"v = "),Me.forEach(u),U=m(Ie,"INPUT",{name:!0,class:!0,type:!0,autocomplete:!0,autocorrect:!0,autocapitalize:!0,spellcheck:!0}),Ie.forEach(u),Ee=C(P),fe=m(P,"PRE",{});var ze=g(fe);he=T(ze,ce),ze.forEach(u),ge=C(P),ae=m(P,"PRE",{class:!0});var De=g(ae);ye=T(De,"    "),ve=T(De,pe),De.forEach(u),P.forEach(u),this.h()},h(){s(r,"class","text-base md:hidden rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300"),s(i,"class","flex md:flex-row-reverse"),s(t,"class","flex justify-between"),s(_,"type","text"),s(_,"class","focus:outline-none text-2xl w-full py-3"),s(L,"for","h"),s(E,"name","h"),s(E,"class","pl-4 font-mono focus:outline-none w-full"),s(E,"type","text"),s(E,"autocomplete","off"),s(E,"autocorrect","off"),s(E,"autocapitalize","off"),s(E,"spellcheck","false"),s(y,"class","flex whitespace-nowrap py-2"),s(S,"class","h-0 invisible"),s(b,"for","s"),s(h,"name","s"),s(h,"class","pl-4 font-mono focus:outline-none w-full"),s(h,"type","text"),s(h,"autocomplete","off"),s(h,"autocorrect","off"),s(h,"autocapitalize","off"),s(h,"spellcheck","false"),s(a,"class","flex whitespace-nowrap py-2"),s(I,"class","h-0 invisible"),s(ue,"for","v"),s(U,"name","v"),s(U,"class","pl-4 font-mono focus:outline-none w-full"),s(U,"type","text"),s(U,"autocomplete","off"),s(U,"autocorrect","off"),s(U,"autocapitalize","off"),s(U,"spellcheck","false"),s(le,"class","flex whitespace-nowrap py-2"),s(ae,"class","h-0 invisible"),s(l,"class","pl-10")},m(R,A){N(R,t,A),o(t,r),o(r,p),o(t,d),o(t,i),F.m(i,null),N(R,c,A),N(R,_,A),Z(_,e[1].name),N(R,f,A),N(R,l,A),o(l,y),o(y,L),o(L,W),o(y,E),Z(E,e[1].h.value),o(l,J),o(l,S),o(S,Q),o(S,x),o(l,M),o(l,G),o(G,K),o(l,j),o(l,a),o(a,b),o(b,n),o(a,h),Z(h,e[1].s.value),o(l,w),o(l,I),o(I,k),o(I,$),o(l,ee),o(l,Y),o(Y,te),o(l,re),o(l,le),o(le,ue),o(ue,_e),o(le,U),Z(U,e[1].v.value),o(l,Ee),o(l,fe),o(fe,he),o(l,ge),o(l,ae),o(ae,ye),o(ae,ve),we||(Ce=[B(r,"click",e[8]),B(_,"input",e[12]),B(E,"input",e[13]),B(E,"input",function(){Pe(e[1].h.onChange)&&e[1].h.onChange.apply(this,arguments)}),B(h,"input",e[14]),B(h,"input",function(){Pe(e[1].s.onChange)&&e[1].s.onChange.apply(this,arguments)}),B(U,"input",e[15]),B(U,"input",function(){Pe(e[1].v.onChange)&&e[1].v.onChange.apply(this,arguments)})],we=!0)},p(R,A){e=R,me===(me=Ne(e))&&F?F.p(e,A):(F.d(1),F=me(e),F&&(F.c(),F.m(i,null))),A&2&&_.value!==e[1].name&&Z(_,e[1].name),A&2&&E.value!==e[1].h.value&&Z(E,e[1].h.value),A&2&&z!==(z=e[1].h.value+"")&&oe(x,z),A&2&&H!==(H=e[1].h.error+"")&&oe(K,H),A&2&&h.value!==e[1].s.value&&Z(h,e[1].s.value),A&2&&D!==(D=e[1].s.value+"")&&oe($,D),A&2&&X!==(X=e[1].s.error+"")&&oe(te,X),A&2&&U.value!==e[1].v.value&&Z(U,e[1].v.value),A&2&&ce!==(ce=e[1].v.error+"")&&oe(he,ce),A&2&&pe!==(pe=e[1].v.value+"")&&oe(ve,pe)},d(R){R&&u(t),F.d(),R&&u(c),R&&u(_),R&&u(f),R&&u(l),we=!1,Ve(Ce)}}}function $e(e){let t,r,p,d;return{c(){t=v("button"),r=O("Delete"),this.h()},l(i){t=m(i,"BUTTON",{class:!0});var c=g(t);r=T(c,"Delete"),c.forEach(u),this.h()},h(){s(t,"class","text-base rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300")},m(i,c){N(i,t,c),o(t,r),p||(d=B(t,"click",e[11]),p=!0)},p:be,d(i){i&&u(t),p=!1,d()}}}function et(e){let t,r,p,d,i,c,_;return{c(){t=v("button"),r=O("Confirm Delete"),p=V(),d=v("button"),i=O("Cancel Delete"),this.h()},l(f){t=m(f,"BUTTON",{class:!0});var l=g(t);r=T(l,"Confirm Delete"),l.forEach(u),p=C(f),d=m(f,"BUTTON",{class:!0});var y=g(d);i=T(y,"Cancel Delete"),y.forEach(u),this.h()},h(){s(t,"class","text-base rounded border-green-800 text-green-800 border-solid border py-1 px-3 mb-4 mx-2 hover:bg-gray-200 active:bg-gray-300"),s(d,"class","text-base rounded border-red-800 text-red-800 border-solid border py-1 px-3 mb-4 mx-2 hover:bg-gray-200 active:bg-gray-300")},m(f,l){N(f,t,l),o(t,r),N(f,p,l),N(f,d,l),o(d,i),c||(_=[B(t,"click",e[9]),B(d,"click",e[10])],c=!0)},p:be,d(f){f&&u(t),f&&u(p),f&&u(d),c=!1,Ve(_)}}}function tt(e){let t,r,p,d,i,c,_,f,l,y,L,W,E,J,S,Q,z,x,M,G,H,K,j=e[0],a=[];for(let n=0;n<j.length;n+=1)a[n]=Ge(We(e,j,n));let b=e[1]&&He(e);return{c(){t=v("header"),r=v("h1"),p=O("LEDS"),d=V(),i=v("div"),c=v("div");for(let n=0;n<a.length;n+=1)a[n].c();_=V(),f=v("button"),l=O("Add equation"),y=V(),L=v("div"),b&&b.c(),W=V(),E=v("div"),J=V(),S=v("script"),Q=O(`var a = function () {
			mistPlay('live', {
				target: document.getElementById('live_RDhIpDwdElfL'),
				muted: true
			});
		};
		if (!window.mistplayers) {
			var p = document.createElement('script');
			p.src = 'http://home.anb.codes:48080/player.js';
			document.head.appendChild(p);
			p.onload = a;
		} else {
			a();
		}`),z=V(),x=v("div"),M=v("button"),G=O("Reload Page"),this.h()},l(n){t=m(n,"HEADER",{class:!0});var h=g(t);r=m(h,"H1",{class:!0});var w=g(r);p=T(w,"LEDS"),w.forEach(u),h.forEach(u),d=C(n),i=m(n,"DIV",{class:!0});var I=g(i);c=m(I,"DIV",{class:!0});var k=g(c);for(let re=0;re<a.length;re+=1)a[re].l(k);_=C(k),f=m(k,"BUTTON",{class:!0});var D=g(f);l=T(D,"Add equation"),D.forEach(u),k.forEach(u),y=C(I),L=m(I,"DIV",{class:!0});var $=g(L);b&&b.l($),$.forEach(u),I.forEach(u),W=C(n),E=m(n,"DIV",{class:!0,id:!0});var ee=g(E);J=C(ee),S=m(ee,"SCRIPT",{});var Y=g(S);Q=T(Y,`var a = function () {
			mistPlay('live', {
				target: document.getElementById('live_RDhIpDwdElfL'),
				muted: true
			});
		};
		if (!window.mistplayers) {
			var p = document.createElement('script');
			p.src = 'http://home.anb.codes:48080/player.js';
			document.head.appendChild(p);
			p.onload = a;
		} else {
			a();
		}`),Y.forEach(u),ee.forEach(u),z=C(n),x=m(n,"DIV",{class:!0});var X=g(x);M=m(X,"BUTTON",{class:!0});var te=g(M);G=T(te,"Reload Page"),te.forEach(u),X.forEach(u),this.h()},h(){s(r,"class","text-5xl "),s(t,"class","pb-10 p-5"),s(f,"class","mt-14 rounded border-gray-800 border-solid border py-4 hover:bg-gray-200 active:bg-gray-300"),s(c,"class","md:flex flex-col flex-shrink-0 text-2xl w-full md:w-[300px] md:border-r border-gray-800 border-solid pr-4"),q(c,"hidden",e[1]),q(c,"flex",!e[1]),s(L,"class","pl-5 flex-grow"),s(i,"class","p-4 font-sans flex"),s(E,"class","mistvideo"),s(E,"id","live_RDhIpDwdElfL"),s(M,"class","text-1xl mt-20 rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300"),s(x,"class","p-4 flex flex-col")},m(n,h){N(n,t,h),o(t,r),o(r,p),N(n,d,h),N(n,i,h),o(i,c);for(let w=0;w<a.length;w+=1)a[w].m(c,null);o(c,_),o(c,f),o(f,l),o(i,y),o(i,L),b&&b.m(L,null),N(n,W,h),N(n,E,h),o(E,J),o(E,S),o(S,Q),N(n,z,h),N(n,x,h),o(x,M),o(M,G),H||(K=[B(f,"click",e[4]),B(M,"click",e[16])],H=!0)},p(n,[h]){if(h&11){j=n[0];let w;for(w=0;w<j.length;w+=1){const I=We(n,j,w);a[w]?a[w].p(I,h):(a[w]=Ge(I),a[w].c(),a[w].m(c,_))}for(;w<a.length;w+=1)a[w].d(1);a.length=j.length}h&2&&q(c,"hidden",n[1]),h&2&&q(c,"flex",!n[1]),n[1]?b?b.p(n,h):(b=He(n),b.c(),b.m(L,null)):b&&(b.d(1),b=null)},i:be,o:be,d(n){n&&u(t),n&&u(d),n&&u(i),Ke(a,n),b&&b.d(),n&&u(W),n&&u(E),n&&u(z),n&&u(x),H=!1,Ve(K)}}}function rt(e,t,r){let p=[],d=!1,i=!1;Ye(()=>{window.location.protocol==="https:"&&(window.location.protocol="http:"),r(0,p=JSON.parse(localStorage.getItem("equations")||"[]")),p.forEach(a=>{a.h.onChange=y(a.h,a),a.s.onChange=y(a.s,a),a.v.onChange=y(a.v,a),a.h.onChange(),a.s.onChange(),a.v.onChange()}),i=!0,r(6,d=!0),setTimeout(()=>{document.querySelectorAll("input").forEach(a=>{a.style.width=Math.max(a.value.length+5,10)+"ch"})})});let c=!1,_;const f=(a,b=!0)=>{if(!i||a.h.error||a.s.error||a.v.error)return;c&&(_&&clearInterval(_),_=setInterval(()=>{c||(f(a,b),clearInterval(_))},1));const n=new Uint32Array(a.h.compiledValue),h=new Uint32Array(a.s.compiledValue),w=new Uint32Array(a.v.compiledValue),I=new Uint32Array([+b]),k=new Uint32Array([se.END,0]),D=new WebSocket("ws://home.anb.codes:13655");c=!0,D.addEventListener("open",()=>{console.log("Sending..."),D.send(I.buffer),console.log(I),D.send(n.buffer),console.log(n),D.send(k.buffer),console.log(k),D.send(h.buffer),console.log(h),D.send(k.buffer),console.log(k),D.send(w.buffer),console.log(w),D.send(k.buffer),console.log(k)}),D.addEventListener("close",()=>{c=!1,console.log("closed")})};let l;const y=(a,b)=>()=>{const n=qe(a.value);n.error?a.error=n.error:(a.error="",a.compiledValue=n.compiled),f(b),r(0,p),r(1,l)},L=()=>{const a={h:{value:"",compiledValue:[],onChange:()=>{},error:""},s:{value:"",compiledValue:[],onChange:()=>{},error:""},v:{value:"",compiledValue:[],onChange:()=>{},error:""},name:"New Equation",open:!0};a.h.onChange=y(a.h,a),a.s.onChange=y(a.s,a),a.v.onChange=y(a.v,a),a.h.onChange(),a.s.onChange(),a.v.onChange(),p.forEach(b=>b.open=!1),p.push(a),r(0,p),r(1,l)},W=a=>{r(0,p=p.filter(b=>b!==a))};let E=!1;const J=a=>{r(1,l=a),f(l)},S=()=>{r(1,l=void 0)},Q=()=>{r(2,E=!1),l&&W(l),r(1,l=void 0)},z=()=>r(2,E=!1),x=()=>r(2,E=!0);function M(){l.name=this.value,r(1,l)}function G(){l.h.value=this.value,r(1,l)}function H(){l.s.value=this.value,r(1,l)}function K(){l.v.value=this.value,r(1,l)}const j=()=>location.reload();return e.$$.update=()=>{e.$$.dirty&3&&l&&(r(0,p),r(1,l)),e.$$.dirty&65&&d&&localStorage.setItem("equations",JSON.stringify(p))},[p,l,E,f,L,W,d,J,S,Q,z,x,M,G,H,K,j]}class at extends Fe{constructor(t){super(),Je(this,t,rt,tt,Qe,{})}}export{at as default};
