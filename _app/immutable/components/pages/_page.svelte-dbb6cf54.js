import{S as se,i as ne,s as ae,k as h,q as I,a as U,l as p,m as _,r as P,h as u,c as R,n as b,b as N,G as l,I as M,u as Ee,B,J as $e,e as mt,K as Xe,L as He,M as Y,N as qe,O as Ze,o as At,P as bt,w as ue,x as ce,y as de,Q as _t,f as X,t as ee,d as Lt,z as fe,g as Nt}from"../../chunks/index-52d356fa.js";function yt(s){let e,t,r;return{c(){e=h("div"),t=I("Key: "),r=I(s[0]),this.h()},l(n){e=p(n,"DIV",{class:!0});var a=_(e);t=P(a,"Key: "),r=P(a,s[0]),a.forEach(u),this.h()},h(){b(e,"class","mt-5")},m(n,a){N(n,e,a),l(e,t),l(e,r)},p(n,a){a&1&&Ee(r,n[0])},d(n){n&&u(e)}}}function Ut(s){let e,t,r,n,a,o,f,i=s[2]?"Hide":"Show",c,d,O,k,V,v=s[2]&&yt(s);return{c(){e=h("div"),t=h("div"),r=h("div"),n=I("User: "),a=I(s[1]),o=U(),f=h("button"),c=I(i),d=I(" key"),O=U(),v&&v.c(),this.h()},l(y){e=p(y,"DIV",{class:!0});var E=_(e);t=p(E,"DIV",{class:!0});var m=_(t);r=p(m,"DIV",{class:!0});var g=_(r);n=P(g,"User: "),a=P(g,s[1]),g.forEach(u),o=R(m),f=p(m,"BUTTON",{class:!0});var A=_(f);c=P(A,i),d=P(A," key"),A.forEach(u),m.forEach(u),O=R(E),v&&v.l(E),E.forEach(u),this.h()},h(){b(r,"class","mr-4 flex items-center"),b(f,"class","rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300"),b(t,"class","flex"),b(e,"class","flex flex-col")},m(y,E){N(y,e,E),l(e,t),l(t,r),l(r,n),l(r,a),l(t,o),l(t,f),l(f,c),l(f,d),l(e,O),v&&v.m(e,null),k||(V=M(f,"click",s[3]),k=!0)},p(y,[E]){E&2&&Ee(a,y[1]),E&4&&i!==(i=y[2]?"Hide":"Show")&&Ee(c,i),y[2]?v?v.p(y,E):(v=yt(y),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i:B,o:B,d(y){y&&u(e),v&&v.d(),k=!1,V()}}}function Rt(s,e,t){let{key:r}=e,n="",a=!1;const o=async i=>{if(!i)return;const d=await(await fetch(`https://leds.spry.workers.dev/get-username?key=${i}`,{method:"GET"})).json();d.username&&t(1,n=d.username)},f=()=>t(2,a=!a);return s.$$set=i=>{"key"in i&&t(0,r=i.key)},s.$$.update=()=>{s.$$.dirty&1&&o(r)},[r,n,a,f]}class St extends se{constructor(e){super(),ne(this,e,Rt,Ut,ae,{key:0})}}const Ot=(s=25)=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890",t=new Uint8Array(s);return crypto.getRandomValues(t),[...t].map(r=>e[Math.round(r/255*e.length)]).join("")};function $t(s){let e,t,r,n;return{c(){e=h("button"),t=I("Add Pattern"),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var o=_(e);t=P(o,"Add Pattern"),o.forEach(u),this.h()},h(){b(e,"class","mt-14 rounded border-gray-800 border-solid border py-4 hover:bg-gray-200 active:bg-gray-300 disabled:hover:bg-white disabled:border-gray-500 disabled:text-gray-500"),e.disabled=s[0]},m(a,o){N(a,e,o),l(e,t),r||(n=M(e,"click",s[1]),r=!0)},p(a,[o]){o&1&&(e.disabled=a[0])},i:B,o:B,d(a){a&&u(e),r=!1,n()}}}function qt(s,e,t){let{disabled:r=!1}=e;const n=$e(),a=()=>{n("newPattern",{name:"New Pattern",h:"",s:"",v:"",id:Ot()})};return s.$$set=o=>{"disabled"in o&&t(0,r=o.disabled)},[r,a]}class Bt extends se{constructor(e){super(),ne(this,e,qt,$t,ae,{disabled:0})}}const z={INVALID:0,SIN:1,ADD:2,SUB:3,MUL:4,DIV:5,POW:6,MOD:7,IF:8,EQ:9,GT:10,LT:11,AND:12,OR:13,VAL:14,VAR_T:15,VAR_I:16,END:17},Ct=z,jt=s=>s.split("").map((e,t)=>e==="("?{type:"OPEN_PARAN",rawValue:e,index:t}:e===")"?{type:"CLOSE_PARAN",rawValue:e,index:t}:e===" "?{type:"WHITESPACE",rawValue:e,index:t}:e==="+"?{type:"OPERATOR",operator:"ADD",rawValue:e,index:t}:e==="-"?{type:"OPERATOR",operator:"SUB",rawValue:e,index:t}:e==="*"?{type:"OPERATOR",operator:"MUL",rawValue:e,index:t}:e==="/"?{type:"OPERATOR",operator:"DIV",rawValue:e,index:t}:e==="%"?{type:"OPERATOR",operator:"MOD",rawValue:e,index:t}:e==="^"?{type:"OPERATOR",operator:"POW",rawValue:e,index:t}:e===">"?{type:"OPERATOR",operator:"GT",rawValue:e,index:t}:e==="<"?{type:"OPERATOR",operator:"LT",rawValue:e,index:t}:e==="="?{type:"OPERATOR",operator:"EQ",rawValue:e,index:t}:e===","?{type:"OPERATOR",operator:"SEP",rawValue:e,index:t}:e==="&"?{type:"OPERATOR",operator:"AND",rawValue:e,index:t}:e==="|"?{type:"OPERATOR",operator:"OR",rawValue:e,index:t}:{type:"LITERAL",value:e,rawValue:e,index:t}),vt=[["SEP"],["AND","OR"],["GT","LT","EQ"],["MOD"],["ADD","SUB"],["DIV","MUL"]];class Re extends Error{constructor(e,t){super(e),this.index=t}}const Je=(s,e)=>{if(s.length===0)throw new Re("Expected an expression",e);for(let a=0;a<vt.length;a++){const o=vt[a];let f=0;for(let i=0;i<s.length;i++){const c=s[i];if(c.type==="OPEN_PARAN"&&(f+=1),c.type==="CLOSE_PARAN"&&(f-=1),c.type==="OPERATOR"&&f==0&&o.includes(c.operator))return{type:"operator",op:c.operator,a:Je(s.slice(0,i),s[0].index+1),b:Je(s.slice(i+1),c.index+1),index:c.index}}}let t="",r=-1;for(let a=0;a<s.length;a++){const o=s[a];if(o.type==="LITERAL"&&(t+=o.value,r===-1&&(r=o.index)),o.type==="OPEN_PARAN"){if(s.slice(-1)[0].type!=="CLOSE_PARAN")throw new Re("Unmatched opening parenthesis",o.index);if(t){const f=Je(s.slice(a+1,-1),o.index),i=[],c=d=>{d.type==="operator"&&d.op==="SEP"?(c(d.a),c(d.b)):i.push(d)};return c(f),{type:"call",name:t,args:i,index:r}}else return Je(s.slice(a+1,-1),o.index)}}const n=s.find(a=>a.type!=="LITERAL");if(n)throw new Re(`Unexpected token: ${n.rawValue}`,n.index);return t=s.map(a=>a.value).join(""),isNaN(parseInt(t,10))?{type:"variable",name:t,index:s[0].index}:{type:"value",val:parseInt(t,10),index:s[0].index}},Ue=s=>{if(s.type==="call"){if(s.name==="if")return[...Ue(s.args[0]),...Ue(s.args[1]),...Ue(s.args[2]),z.IF];if(s.name==="sin")return[...Ue(s.args[0]),z.SIN];throw new Re(`Invalid function: ${s.name}`,s.index)}else if(s.type==="operator"){const e=Ct[s.op];if(e===void 0)throw new Re(`Invalid operator: ${s.op}`,s.index);return[...Ue(s.a),...Ue(s.b),e]}else{if(s.type==="value")return[z.VAL,s.val];if(s.type==="variable"){if(s.name==="i")return[z.VAR_I];if(s.name==="t")return[z.VAR_T];throw new Re(`Unknown variable: ${s.name}`,s.index)}else throw new Error("INVALID TYPE")}},Se=s=>{try{const e=jt(s),t=Je(e.filter(n=>n.type!=="WHITESPACE"),0);return{compiled:Ue(t)}}catch(e){if(e instanceof Re)return{error:`Error: ${e.message}
    ${s}
    ${" ".repeat(e.index)}^`,errorRaw:e};throw e}};function gt(s,e,t){const r=s.slice();return r[3]=e[t],r[5]=t,r}function wt(s){let e,t=s[3].name+"",r,n,a,o;function f(){return s[2](s[3])}return{c(){e=h("button"),r=I(t),this.h()},l(i){e=p(i,"BUTTON",{class:!0});var c=_(e);r=P(c,t),c.forEach(u),this.h()},h(){b(e,"class",n=(s[0]!=s[3].id?"hover:bg-gray-200":"bg-gray-300")+" border-gray-800 p-2 mx-2 border-solid border-b active:bg-gray-300"),He(e,"border-t",s[5]===0)},m(i,c){N(i,e,c),l(e,r),a||(o=M(e,"click",f),a=!0)},p(i,c){s=i,c&2&&t!==(t=s[3].name+"")&&Ee(r,t),c&3&&n!==(n=(s[0]!=s[3].id?"hover:bg-gray-200":"bg-gray-300")+" border-gray-800 p-2 mx-2 border-solid border-b active:bg-gray-300")&&b(e,"class",n),c&3&&He(e,"border-t",s[5]===0)},d(i){i&&u(e),a=!1,o()}}}function Kt(s){let e,t=s[1],r=[];for(let n=0;n<t.length;n+=1)r[n]=wt(gt(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=mt()},l(n){for(let a=0;a<r.length;a+=1)r[a].l(n);e=mt()},m(n,a){for(let o=0;o<r.length;o+=1)r[o].m(n,a);N(n,e,a)},p(n,[a]){if(a&3){t=n[1];let o;for(o=0;o<t.length;o+=1){const f=gt(n,t,o);r[o]?r[o].p(f,a):(r[o]=wt(f),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},i:B,o:B,d(n){Xe(r,n),n&&u(e)}}}function Mt(s,e,t){let{patterns:r}=e,{currentPatternId:n}=e;const a=o=>t(0,n=o.id);return s.$$set=o=>{"patterns"in o&&t(1,r=o.patterns),"currentPatternId"in o&&t(0,n=o.currentPatternId)},[n,r,a]}class Ht extends se{constructor(e){super(),ne(this,e,Mt,Kt,ae,{patterns:1,currentPatternId:0})}}function Wt(s){let e,t,r;return{c(){e=h("input"),this.h()},l(n){e=p(n,"INPUT",{class:!0,name:!0,type:!0}),this.h()},h(){b(e,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(e,"name","p1"),b(e,"type","password")},m(n,a){N(n,e,a),Y(e,s[0][0]),t||(r=M(e,"input",s[3]),t=!0)},p(n,a){a&1&&e.value!==n[0][0]&&Y(e,n[0][0])},d(n){n&&u(e),t=!1,r()}}}function Gt(s){let e,t,r;return{c(){e=h("input"),this.h()},l(n){e=p(n,"INPUT",{class:!0,name:!0,type:!0}),this.h()},h(){b(e,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(e,"name","p1"),b(e,"type","text")},m(n,a){N(n,e,a),Y(e,s[0][0]),t||(r=M(e,"input",s[2]),t=!0)},p(n,a){a&1&&e.value!==n[0][0]&&Y(e,n[0][0])},d(n){n&&u(e),t=!1,r()}}}function Jt(s){let e,t,r;return{c(){e=h("input"),this.h()},l(n){e=p(n,"INPUT",{class:!0,name:!0,type:!0}),this.h()},h(){b(e,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(e,"name","p2"),b(e,"type","password")},m(n,a){N(n,e,a),Y(e,s[0][1]),t||(r=M(e,"input",s[5]),t=!0)},p(n,a){a&1&&e.value!==n[0][1]&&Y(e,n[0][1])},d(n){n&&u(e),t=!1,r()}}}function zt(s){let e,t,r;return{c(){e=h("input"),this.h()},l(n){e=p(n,"INPUT",{class:!0,name:!0,type:!0}),this.h()},h(){b(e,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(e,"name","p2"),b(e,"type","text")},m(n,a){N(n,e,a),Y(e,s[0][1]),t||(r=M(e,"input",s[4]),t=!0)},p(n,a){a&1&&e.value!==n[0][1]&&Y(e,n[0][1])},d(n){n&&u(e),t=!1,r()}}}function Qt(s){let e,t,r,n,a,o,f,i,c,d,O,k,V,v,y=s[1]?"Hide":"Show",E,m,g;function A(S,q){return S[1]?Gt:Wt}let w=A(s),D=w(s);function $(S,q){return S[1]?zt:Jt}let W=$(s),L=W(s);return{c(){e=h("div"),t=I(`LEDs Password
	`),r=h("div"),n=h("label"),a=I("Part 1"),o=U(),D.c(),f=U(),i=h("div"),c=h("label"),d=I("Part 2"),O=U(),L.c(),k=U(),V=h("div"),v=h("button"),E=I(y),this.h()},l(S){e=p(S,"DIV",{});var q=_(e);t=P(q,`LEDs Password
	`),r=p(q,"DIV",{class:!0});var H=_(r);n=p(H,"LABEL",{for:!0});var F=_(n);a=P(F,"Part 1"),F.forEach(u),o=R(H),D.l(H),H.forEach(u),f=R(q),i=p(q,"DIV",{class:!0});var j=_(i);c=p(j,"LABEL",{for:!0});var Z=_(c);d=P(Z,"Part 2"),Z.forEach(u),O=R(j),L.l(j),j.forEach(u),k=R(q),V=p(q,"DIV",{});var te=_(V);v=p(te,"BUTTON",{class:!0});var x=_(v);E=P(x,y),x.forEach(u),te.forEach(u),q.forEach(u),this.h()},h(){b(n,"for","p1"),b(r,"class","m-3"),b(c,"for","p2"),b(i,"class","m-3"),b(v,"class","text-1xl mt-2 rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300")},m(S,q){N(S,e,q),l(e,t),l(e,r),l(r,n),l(n,a),l(r,o),D.m(r,null),l(e,f),l(e,i),l(i,c),l(c,d),l(i,O),L.m(i,null),l(e,k),l(e,V),l(V,v),l(v,E),m||(g=M(v,"click",s[6]),m=!0)},p(S,[q]){w===(w=A(S))&&D?D.p(S,q):(D.d(1),D=w(S),D&&(D.c(),D.m(r,null))),W===(W=$(S))&&L?L.p(S,q):(L.d(1),L=W(S),L&&(L.c(),L.m(i,null))),q&2&&y!==(y=S[1]?"Hide":"Show")&&Ee(E,y)},i:B,o:B,d(S){S&&u(e),D.d(),L.d(),m=!1,g()}}}function Ft(s,e,t){let{LEDPassword:r}=e,n=!1;function a(){r[0]=this.value,t(0,r)}function o(){r[0]=this.value,t(0,r)}function f(){r[1]=this.value,t(0,r)}function i(){r[1]=this.value,t(0,r)}const c=()=>t(1,n=!n);return s.$$set=d=>{"LEDPassword"in d&&t(0,r=d.LEDPassword)},[r,n,a,o,f,i,c]}class Yt extends se{constructor(e){super(),ne(this,e,Ft,Qt,ae,{LEDPassword:0})}}function Zt(s){let e,t,r,n,a,o,f,i;return{c(){e=h("div"),t=h("button"),r=I("New Account"),n=U(),a=h("div"),o=I("Note: Backup your current key first!"),this.h()},l(c){e=p(c,"DIV",{});var d=_(e);t=p(d,"BUTTON",{class:!0});var O=_(t);r=P(O,"New Account"),O.forEach(u),n=R(d),a=p(d,"DIV",{});var k=_(a);o=P(k,"Note: Backup your current key first!"),k.forEach(u),d.forEach(u),this.h()},h(){b(t,"class","rounded border-gray-800 border-solid border w-36 py-2 my-3 hover:bg-gray-200 active:bg-gray-300")},m(c,d){N(c,e,d),l(e,t),l(t,r),l(e,n),l(e,a),l(a,o),f||(i=M(t,"click",s[1]),f=!0)},p:B,i:B,o:B,d(c){c&&u(e),f=!1,i()}}}function Xt(s){const e=$e();return[e,()=>e("click")]}class xt extends se{constructor(e){super(),ne(this,e,Xt,Zt,ae,{})}}function Et(s,e,t){const r=s.slice();return r[18]=e[t],r[19]=e,r[20]=t,r}function kt(s){let e,t,r,n,a,o,f,i,c,d,O,k,V,v;function y(w,D){return w[2]?tr:er}let E=y(s),m=E(s),g=s[5],A=[];for(let w=0;w<g.length;w+=1)A[w]=It(Et(s,g,w));return{c(){e=h("div"),t=h("button"),r=I("Back"),n=U(),a=h("div"),o=h("button"),f=I("Clone"),i=U(),m.c(),c=U(),d=h("input"),O=U(),k=h("div");for(let w=0;w<A.length;w+=1)A[w].c();this.h()},l(w){e=p(w,"DIV",{class:!0});var D=_(e);t=p(D,"BUTTON",{class:!0});var $=_(t);r=P($,"Back"),$.forEach(u),n=R(D),a=p(D,"DIV",{class:!0});var W=_(a);o=p(W,"BUTTON",{class:!0});var L=_(o);f=P(L,"Clone"),L.forEach(u),i=R(W),m.l(W),W.forEach(u),D.forEach(u),c=R(w),d=p(w,"INPUT",{type:!0,class:!0}),O=R(w),k=p(w,"DIV",{class:!0});var S=_(k);for(let q=0;q<A.length;q+=1)A[q].l(S);S.forEach(u),this.h()},h(){b(t,"class","text-base md:hidden rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300"),b(o,"class","text-base rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300 mx-2"),b(a,"class","flex md:flex-row-reverse"),b(e,"class","flex justify-between"),b(d,"type","text"),b(d,"class","focus:outline-none text-2xl w-full py-3"),d.disabled=s[0],b(k,"class","pl-10")},m(w,D){N(w,e,D),l(e,t),l(t,r),l(e,n),l(e,a),l(a,o),l(o,f),l(a,i),m.m(a,null),N(w,c,D),N(w,d,D),Y(d,s[1].name),N(w,O,D),N(w,k,D);for(let $=0;$<A.length;$+=1)A[$].m(k,null);V||(v=[M(t,"click",s[9]),M(o,"click",s[10]),M(d,"input",s[14]),M(d,"input",s[6])],V=!0)},p(w,D){if(E===(E=y(w))&&m?m.p(w,D):(m.d(1),m=E(w),m&&(m.c(),m.m(a,null))),D&1&&(d.disabled=w[0]),D&2&&d.value!==w[1].name&&Y(d,w[1].name),D&107){g=w[5];let $;for($=0;$<g.length;$+=1){const W=Et(w,g,$);A[$]?A[$].p(W,D):(A[$]=It(W),A[$].c(),A[$].m(k,null))}for(;$<A.length;$+=1)A[$].d(1);A.length=g.length}},d(w){w&&u(e),m.d(),w&&u(c),w&&u(d),w&&u(O),w&&u(k),Xe(A,w),V=!1,qe(v)}}}function er(s){let e,t,r,n;return{c(){e=h("button"),t=I("Delete"),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var o=_(e);t=P(o,"Delete"),o.forEach(u),this.h()},h(){b(e,"class","text-base rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300 disabled:hover:bg-white disabled:border-gray-500 disabled:text-gray-500"),e.disabled=s[0]},m(a,o){N(a,e,o),l(e,t),r||(n=M(e,"click",s[13]),r=!0)},p(a,o){o&1&&(e.disabled=a[0])},d(a){a&&u(e),r=!1,n()}}}function tr(s){let e,t,r,n,a,o,f;return{c(){e=h("button"),t=I("Confirm Delete"),r=U(),n=h("button"),a=I("Cancel Delete"),this.h()},l(i){e=p(i,"BUTTON",{class:!0});var c=_(e);t=P(c,"Confirm Delete"),c.forEach(u),r=R(i),n=p(i,"BUTTON",{class:!0});var d=_(n);a=P(d,"Cancel Delete"),d.forEach(u),this.h()},h(){b(e,"class","text-base rounded border-solid border py-1 px-3 mb-4 mx-2 hover:bg-gray-200 active:bg-gray-300"),b(n,"class","text-base rounded border-solid border py-1 px-3 mb-4 mx-2 hover:bg-gray-200 active:bg-gray-300")},m(i,c){N(i,e,c),l(e,t),N(i,r,c),N(i,n,c),l(n,a),o||(f=[M(e,"click",s[11]),M(n,"click",s[12])],o=!0)},p:B,d(i){i&&u(e),i&&u(r),i&&u(n),o=!1,qe(f)}}}function It(s){let e,t,r=s[18]+"",n,a,o,f,i,c=s[1][s[18]]+"",d,O,k,V=s[3][s[18]]+"",v,y,E;function m(){s[15].call(o,s[18])}return{c(){e=h("div"),t=h("label"),n=I(r),a=I(" = "),o=h("input"),f=U(),i=h("pre"),d=I(c),O=U(),k=h("pre"),v=I(V),this.h()},l(g){e=p(g,"DIV",{class:!0});var A=_(e);t=p(A,"LABEL",{for:!0});var w=_(t);n=P(w,r),a=P(w," = "),w.forEach(u),o=p(A,"INPUT",{name:!0,class:!0,type:!0,autocomplete:!0,autocorrect:!0,autocapitalize:!0,spellcheck:!0}),A.forEach(u),f=R(g),i=p(g,"PRE",{class:!0});var D=_(i);d=P(D,c),D.forEach(u),O=R(g),k=p(g,"PRE",{});var $=_(k);v=P($,V),$.forEach(u),this.h()},h(){b(t,"for",s[18]),b(o,"name",s[18]),b(o,"class","pl-4 font-mono focus:outline-none w-full"),b(o,"type","text"),b(o,"autocomplete","off"),b(o,"autocorrect","off"),b(o,"autocapitalize","off"),b(o,"spellcheck","false"),o.disabled=s[0],b(e,"class","flex whitespace-nowrap py-2"),b(i,"class","h-0 invisible")},m(g,A){N(g,e,A),l(e,t),l(t,n),l(t,a),l(e,o),Y(o,s[1][s[18]]),N(g,f,A),N(g,i,A),l(i,d),N(g,O,A),N(g,k,A),l(k,v),y||(E=[M(o,"input",m),M(o,"input",s[6])],y=!0)},p(g,A){s=g,A&1&&(o.disabled=s[0]),A&34&&o.value!==s[1][s[18]]&&Y(o,s[1][s[18]]),A&2&&c!==(c=s[1][s[18]]+"")&&Ee(d,c),A&8&&V!==(V=s[3][s[18]]+"")&&Ee(v,V)},d(g){g&&u(e),g&&u(f),g&&u(i),g&&u(O),g&&u(k),y=!1,qe(E)}}}function rr(s){let e,t=s[1]&&kt(s);return{c(){e=h("div"),t&&t.c(),this.h()},l(r){e=p(r,"DIV",{class:!0});var n=_(e);t&&t.l(n),n.forEach(u),this.h()},h(){b(e,"class","flex flex-col")},m(r,n){N(r,e,n),t&&t.m(e,null)},p(r,[n]){r[1]?t?t.p(r,n):(t=kt(r),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:B,o:B,d(r){r&&u(e),t&&t.d()}}}function sr(s,e,t){let{patterns:r}=e,{currentPatternId:n}=e,{disabled:a=!1}=e,o,f=$e(),i=!1,c=["h","s","v"];const d={h:"",s:"",v:""};let O;const k=()=>{if(!!o)for(let D of c){const{error:$}=Se(o[D]);$?t(3,d[D]=$,d):t(3,d[D]="",d)}},V=()=>{!o||(k(),clearTimeout(O),O=setTimeout(()=>f("edit",o),500))},v=()=>f("close"),y=()=>f("newPattern",{...o,id:Ot()}),E=()=>{t(2,i=!1),f("remove",o)},m=()=>t(2,i=!1),g=()=>t(2,i=!0);function A(){o.name=this.value,t(1,o),t(7,r),t(8,n)}function w(D){o[D]=this.value,t(1,o),t(7,r),t(8,n)}return s.$$set=D=>{"patterns"in D&&t(7,r=D.patterns),"currentPatternId"in D&&t(8,n=D.currentPatternId),"disabled"in D&&t(0,a=D.disabled)},s.$$.update=()=>{s.$$.dirty&384&&t(1,o=r.find(D=>D.id===n)),s.$$.dirty&2&&o&&k()},[a,o,i,d,f,c,V,r,n,v,y,E,m,g,A,w]}class nr extends se{constructor(e){super(),ne(this,e,sr,rr,ae,{patterns:7,currentPatternId:8,disabled:0})}}function ar(s){let e,t,r,n;return{c(){e=h("button"),t=I("Refresh Key"),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var o=_(e);t=P(o,"Refresh Key"),o.forEach(u),this.h()},h(){b(e,"class","rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300")},m(a,o){N(a,e,o),l(e,t),r||(n=M(e,"click",s[4]),r=!0)},p:B,d(a){a&&u(e),r=!1,n()}}}function or(s){let e,t,r,n,a,o,f,i,c,d,O;return{c(){e=h("div"),t=h("button"),r=I("Cancel"),n=U(),a=h("button"),o=I("Confirm"),f=U(),i=h("div"),c=I("Note: Refreshing your key logs you out of all devices"),this.h()},l(k){e=p(k,"DIV",{class:!0});var V=_(e);t=p(V,"BUTTON",{class:!0});var v=_(t);r=P(v,"Cancel"),v.forEach(u),n=R(V),a=p(V,"BUTTON",{class:!0});var y=_(a);o=P(y,"Confirm"),y.forEach(u),V.forEach(u),f=R(k),i=p(k,"DIV",{});var E=_(i);c=P(E,"Note: Refreshing your key logs you out of all devices"),E.forEach(u),this.h()},h(){b(t,"class","rounded border-gray-800 border-solid border w-36 py-2 mr-4 hover:bg-gray-200 active:bg-gray-300"),b(a,"class","rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300"),b(e,"class","flex")},m(k,V){N(k,e,V),l(e,t),l(t,r),l(e,n),l(e,a),l(a,o),N(k,f,V),N(k,i,V),l(i,c),d||(O=[M(t,"click",s[3]),M(a,"click",s[1])],d=!0)},p:B,d(k){k&&u(e),k&&u(f),k&&u(i),d=!1,qe(O)}}}function lr(s){let e;function t(a,o){return a[0]?or:ar}let r=t(s),n=r(s);return{c(){e=h("div"),n.c()},l(a){e=p(a,"DIV",{});var o=_(e);n.l(o),o.forEach(u)},m(a,o){N(a,e,o),n.m(e,null)},p(a,[o]){r===(r=t(a))&&n?n.p(a,o):(n.d(1),n=r(a),n&&(n.c(),n.m(e,null)))},i:B,o:B,d(a){a&&u(e),n.d()}}}function ir(s,e,t){let{key:r}=e,n=!1;const a=$e(),o=async()=>{t(0,n=!1);const d=await(await fetch(`https://leds.spry.workers.dev/new-pass?key=${r}`,{method:"POST"})).json();d.key&&a("newKey",d.key)},f=()=>{t(0,n=!1)},i=()=>t(0,n=!0);return s.$$set=c=>{"key"in c&&t(2,r=c.key)},[n,o,r,f,i]}class ur extends se{constructor(e){super(),ne(this,e,ir,lr,ae,{key:2})}}function cr(s){let e,t,r,n;return{c(){e=h("button"),t=I("Reload Page"),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var o=_(e);t=P(o,"Reload Page"),o.forEach(u),this.h()},h(){b(e,"class","text-1xl mt-20 rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300")},m(a,o){N(a,e,o),l(e,t),r||(n=M(e,"click",s[0]),r=!0)},p:B,i:B,o:B,d(a){a&&u(e),r=!1,n()}}}function dr(s){return[()=>location.reload()]}class fr extends se{constructor(e){super(),ne(this,e,dr,cr,ae,{})}}function hr(s){let e,t,r,n,a,o,f,i,c,d,O,k,V,v,y,E;return{c(){e=h("div"),t=h("label"),r=I("Key"),n=U(),a=h("input"),o=U(),f=h("div"),i=I(s[0]),c=U(),d=h("button"),O=I("Set Key"),k=U(),V=h("div"),v=I("Note: Setting the key allows you to change accounts (remember to save your old key somewhere!)"),this.h()},l(m){e=p(m,"DIV",{class:!0});var g=_(e);t=p(g,"LABEL",{for:!0});var A=_(t);r=P(A,"Key"),A.forEach(u),n=R(g),a=p(g,"INPUT",{class:!0,name:!0}),g.forEach(u),o=R(m),f=p(m,"DIV",{class:!0});var w=_(f);i=P(w,s[0]),w.forEach(u),c=R(m),d=p(m,"BUTTON",{class:!0});var D=_(d);O=P(D,"Set Key"),D.forEach(u),k=R(m),V=p(m,"DIV",{});var $=_(V);v=P($,"Note: Setting the key allows you to change accounts (remember to save your old key somewhere!)"),$.forEach(u),this.h()},h(){b(t,"for","key"),b(a,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(a,"name","key"),b(e,"class","flex"),b(f,"class","text-sm text-red-800"),b(d,"class","rounded border-gray-800 border-solid border w-36 py-2 my-3 hover:bg-gray-200 active:bg-gray-300")},m(m,g){N(m,e,g),l(e,t),l(t,r),l(e,n),l(e,a),Y(a,s[1]),N(m,o,g),N(m,f,g),l(f,i),N(m,c,g),N(m,d,g),l(d,O),N(m,k,g),N(m,V,g),l(V,v),y||(E=[M(a,"input",s[3]),M(d,"click",s[4])],y=!0)},p(m,[g]){g&2&&a.value!==m[1]&&Y(a,m[1]),g&1&&Ee(i,m[0])},i:B,o:B,d(m){m&&u(e),m&&u(o),m&&u(f),m&&u(c),m&&u(d),m&&u(k),m&&u(V),y=!1,qe(E)}}}function pr(s,e,t){let r="",n="";const a=$e(),o=async()=>{if(n.length!==25){t(0,r="Key must be 25 characters long");return}const d=await(await fetch(`https://leds.spry.workers.dev/get-username?key=${n}`,{method:"GET"})).json();d.username?(a("newKey",n),t(0,r=""),t(1,n="")):t(0,r=d.error)};function f(){n=this.value,t(1,n)}return[r,n,o,f,()=>o()]}class mr extends se{constructor(e){super(),ne(this,e,pr,hr,ae,{})}}function br(s){let e,t,r,n,a,o,f,i,c,d,O,k,V,v;return{c(){e=h("div"),t=h("div"),r=h("label"),n=I("Username"),a=U(),o=h("input"),f=U(),i=h("div"),c=I(s[1]),d=U(),O=h("button"),k=I("Set Username"),this.h()},l(y){e=p(y,"DIV",{class:!0});var E=_(e);t=p(E,"DIV",{class:!0});var m=_(t);r=p(m,"LABEL",{for:!0});var g=_(r);n=P(g,"Username"),g.forEach(u),a=R(m),o=p(m,"INPUT",{class:!0,name:!0}),m.forEach(u),f=R(E),i=p(E,"DIV",{class:!0});var A=_(i);c=P(A,s[1]),A.forEach(u),d=R(E),O=p(E,"BUTTON",{class:!0});var w=_(O);k=P(w,"Set Username"),w.forEach(u),E.forEach(u),this.h()},h(){b(r,"for","username"),b(o,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(o,"name","username"),b(t,"class","flex"),b(i,"class","text-sm text-red-800"),b(O,"class","rounded border-gray-800 border-solid border w-36 py-2 my-3 hover:bg-gray-200 active:bg-gray-300"),b(e,"class","flex flex-col")},m(y,E){N(y,e,E),l(e,t),l(t,r),l(r,n),l(t,a),l(t,o),Y(o,s[0]),l(e,f),l(e,i),l(i,c),l(e,d),l(e,O),l(O,k),V||(v=[M(o,"input",s[4]),M(O,"click",s[5])],V=!0)},p(y,[E]){E&1&&o.value!==y[0]&&Y(o,y[0]),E&2&&Ee(c,y[1])},i:B,o:B,d(y){y&&u(e),V=!1,qe(v)}}}function _r(s,e,t){let{key:r}=e;const n=$e();let a="",o="";const f=async()=>{if(a==="")return;const O=await(await fetch(`https://leds.spry.workers.dev/set-username?key=${r}&username=${a}`,{method:"POST"})).json();O.success?(n("update"),t(1,o=""),t(0,a="")):t(1,o=O.error)};function i(){a=this.value,t(0,a)}const c=()=>f();return s.$$set=d=>{"key"in d&&t(3,r=d.key)},[a,o,f,r,i,c]}class yr extends se{constructor(e){super(),ne(this,e,_r,br,ae,{key:3})}}const vr=(s,e,t)=>{var r=0,n=0,a=0,o,f,i,c,d;switch(o=Math.floor(s*6),f=s*6-o,i=t*(1-e),c=t*(1-f*e),d=t*(1-(1-f)*e),o%6){case 0:r=t,n=d,a=i;break;case 1:r=c,n=t,a=i;break;case 2:r=i,n=t,a=d;break;case 3:r=i,n=c,a=t;break;case 4:r=d,n=i,a=t;break;case 5:r=t,n=i,a=c;break}return{r:Math.round(r*255),g:Math.round(n*255),b:Math.round(a*255)}},Fe=100;let Vt=0;const gr=[128,131,134,137,140,143,146,149,152,156,159,162,165,168,171,174,176,179,182,185,188,191,193,196,199,201,204,206,209,211,213,216,218,220,222,224,226,228,230,232,234,235,237,239,240,242,243,244,246,247,248,249,250,251,251,252,253,253,254,254,254,255,255,255,255,255,255,255,254,254,253,253,252,252,251,250,249,248,247,246,245,244,242,241,239,238,236,235,233,231,229,227,225,223,221,219,217,215,212,210,207,205,202,200,197,195,192,189,186,184,181,178,175,172,169,166,163,160,157,154,151,148,145,142,138,135,132,129,126,123,120,117,113,110,107,104,101,98,95,92,89,86,83,80,77,74,71,69,66,63,60,58,55,53,50,48,45,43,40,38,36,34,32,30,28,26,24,22,20,19,17,16,14,13,11,10,9,8,7,6,5,4,3,3,2,2,1,1,0,0,0,0,0,0,0,1,1,1,2,2,3,4,4,5,6,7,8,9,11,12,13,15,16,18,20,21,23,25,27,29,31,33,35,37,39,42,44,46,49,51,54,56,59,62,64,67,70,73,76,79,81,84,87,90,93,96,99,103,106,109,112,115,118,121,124],Ye=(s,e)=>{if(s.find(n=>Math.floor(n)!==n))throw new Error("Program contains non int");const t=[];let r=-1;for(let n=0;n<s.length;n++){switch(s[n]){case z.SIN:t[r]=gr[t[r]%256];break;case z.ADD:if(r--,r<0)return 1;t[r]=t[r]+t[r+1];break;case z.SUB:if(r--,r<0)return 1;t[r]=t[r]-t[r+1];break;case z.MUL:if(r--,r<0)return 1;t[r]=t[r]*t[r+1];break;case z.DIV:if(r--,r<0)return 1;t[r]=Math.floor(t[r]/t[r+1]);break;case z.POW:if(r--,r<0)return 1;t[r]=Math.pow(t[r],t[r+1]);break;case z.MOD:if(r--,r<0)return 1;t[r]=t[r]%t[r+1];break;case z.IF:if(r-=2,r<0)return 1;t[r]=t[r]?t[r+1]:t[r+2];break;case z.EQ:if(r--,r<0)return 1;t[r]=+(t[r]==t[r+1]);break;case z.GT:if(r--,r<0)return 1;t[r]=+(t[r]>t[r+1]);break;case z.LT:if(r--,r<0)return 1;t[r]=+(t[r]<t[r+1]);break;case z.AND:if(r--,r<0)return 1;t[r]=t[r]&t[r+1];break;case z.OR:if(r--,r<0)return 1;t[r]=t[r]|t[r+1];break;case z.VAL:if(r++,r>=Fe)return 1;t[r]=s[n+1],n++;break;case z.VAR_T:if(r++,r>=Fe)return 1;t[r]=Vt;break;case z.VAR_I:if(r++,r>=Fe)return 1;t[r]=e;break;case z.END:return t[0]}for(;t[r]<0;)t[r]+=2**32;for(;t[r]>=2**32;)t[r]-=2**32}return t[0]},wr=238,Er=(s,e,t,r,n)=>{Vt++;const a=[...new Array(wr)].map(i=>({h:0,s:0,v:0}));for(let i=0;i<a.length;i++)a[i].h=Ye(t,i)%256,a[i].s=Ye(r,i)%256,a[i].v=Ye(n,i)%256;a.reverse(),s.width=s.clientWidth;const o=s.width/a.length,f=Math.max(6,o);s.height=f,e.clearRect(0,0,s.width,s.height);for(let i=0;i<a.length;i++){const c=vr(a[i].h/255,a[i].s/255,a[i].v/128);e.fillStyle=`rgb(${c.r}, ${c.g}, ${c.b})`,e.fillRect(i*o,0,o,f)}return o};function kr(s){let e;return{c(){e=h("canvas"),this.h()},l(t){e=p(t,"CANVAS",{class:!0,height:!0}),_(e).forEach(u),this.h()},h(){b(e,"class","w-full"),b(e,"height","0")},m(t,r){N(t,e,r),s[3](e)},p:B,i:B,o:B,d(t){t&&u(e),s[3](null)}}}function Ir(s,e,t){let{patterns:r}=e,{currentPatternId:n}=e,a,o;setInterval(()=>{if(!a||!o)return;const{compiled:i}=Se(a.h),{compiled:c}=Se(a.s),{compiled:d}=Se(a.v);if(!i||!c||!d)return;const O=o.getContext("2d");!O||Er(o,O,i,c,d)},1e3/50);function f(i){Ze[i?"unshift":"push"](()=>{o=i,t(0,o)})}return s.$$set=i=>{"patterns"in i&&t(1,r=i.patterns),"currentPatternId"in i&&t(2,n=i.currentPatternId)},s.$$.update=()=>{s.$$.dirty&6&&(a=r.find(i=>i.id===n))},[o,r,n,f]}class Pr extends se{constructor(e){super(),ne(this,e,Ir,kr,ae,{patterns:1,currentPatternId:2})}}function Dr(s){let e,t,r,n,a,o,f,i,c,d,O,k,V,v,y,E,m,g,A,w,D,$,W,L,S,q,H,F,j,Z,te,x,re,oe,Q,le,ke,Le,ye,ie,Ne,ve,me,he,We,Be,K,Ge,Ae,T,J,C,be,pe,Ie,_e,Pe,De,ge,Ce,Te,je,Ke;return{c(){e=h("div"),t=h("h1"),r=I("Usage"),n=U(),a=h("p"),o=I('Add sets of equations using the "Add Equation" button.'),f=U(),i=h("p"),c=I(`Each set of equations contains an "h" equation, an "s" equation, and a "v" equation. Each
		equation corresponds to each part of the `),d=h("a"),O=I("HSV color"),k=I(" of the LED."),V=U(),v=h("p"),y=I(`Each equation is run every frame for every LED on the led strip, which allows you to create a
		LED pattern by using the equations.`),E=U(),m=h("p"),g=I("The equations look like normal math equations, for example, setting "),A=h("code"),w=I("h = i + t"),D=I(` and
		`),$=h("code"),W=I("s = 255"),L=I(`
		and `),S=h("code"),q=I("v = 90"),H=I(" will create a rainbow pattern across the led strip."),F=U(),j=h("p"),Z=I(`All numbers are integers and the values sent to the LEDs are mod 256 of the result of the
		equations. You can access two variables: `),te=h("code"),x=I("i"),re=I(" and "),oe=h("code"),Q=I("t"),le=I(". "),ke=h("code"),Le=I("i"),ye=I(` is
		the index of the LED and `),ie=h("code"),Ne=I("t"),ve=I(" is the current frame, which increments by 1 every frame."),me=U(),he=h("p"),We=I(`I attempted to have expressions evaluated according to the order of operations, but I don't
		think I got it quite working, so I recommend using parenthesis if something doesn't seem right.`),Be=U(),K=h("p"),Ge=I("There are two functions that you can use. The first one is "),Ae=h("code"),T=I(`if([expr], [if not 0], [if 0])
		`),J=I(", which should be self-explanatory. The other one is "),C=h("code"),be=I("sin([value])"),pe=I(`, which
		computes the sin of a value, but a full cycle is 0-255 instead of 0-2pi.`),Ie=U(),_e=h("p"),Pe=I(`The video is a live stream of my LED lights running whatever equations are written here. If too
		many people use this, it could get crazy. When you type in an equation, it is automatically sent
		to the LED strip.`),De=U(),ge=h("p"),Ce=I(`This was a random project that I wanted to try. I'll probably set a password on it at some
		point, but I thought I'd let the whole world try it out first. It probably has a lot of bugs and
		I'm not planning to fix them all. I also wrote a `),Te=h("a"),je=I("blog post"),Ke=I(" explaining how everything works."),this.h()},l(Oe){e=p(Oe,"DIV",{class:!0});var G=_(e);t=p(G,"H1",{});var xe=_(t);r=P(xe,"Usage"),xe.forEach(u),n=R(G),a=p(G,"P",{});var et=_(a);o=P(et,'Add sets of equations using the "Add Equation" button.'),et.forEach(u),f=R(G),i=p(G,"P",{});var ze=_(i);c=P(ze,`Each set of equations contains an "h" equation, an "s" equation, and a "v" equation. Each
		equation corresponds to each part of the `),d=p(ze,"A",{href:!0});var tt=_(d);O=P(tt,"HSV color"),tt.forEach(u),k=P(ze," of the LED."),ze.forEach(u),V=R(G),v=p(G,"P",{});var rt=_(v);y=P(rt,`Each equation is run every frame for every LED on the led strip, which allows you to create a
		LED pattern by using the equations.`),rt.forEach(u),E=R(G),m=p(G,"P",{});var Ve=_(m);g=P(Ve,"The equations look like normal math equations, for example, setting "),A=p(Ve,"CODE",{});var st=_(A);w=P(st,"h = i + t"),st.forEach(u),D=P(Ve,` and
		`),$=p(Ve,"CODE",{});var nt=_($);W=P(nt,"s = 255"),nt.forEach(u),L=P(Ve,`
		and `),S=p(Ve,"CODE",{});var at=_(S);q=P(at,"v = 90"),at.forEach(u),H=P(Ve," will create a rainbow pattern across the led strip."),Ve.forEach(u),F=R(G),j=p(G,"P",{});var we=_(j);Z=P(we,`All numbers are integers and the values sent to the LEDs are mod 256 of the result of the
		equations. You can access two variables: `),te=p(we,"CODE",{});var ot=_(te);x=P(ot,"i"),ot.forEach(u),re=P(we," and "),oe=p(we,"CODE",{});var lt=_(oe);Q=P(lt,"t"),lt.forEach(u),le=P(we,". "),ke=p(we,"CODE",{});var it=_(ke);Le=P(it,"i"),it.forEach(u),ye=P(we,` is
		the index of the LED and `),ie=p(we,"CODE",{});var ut=_(ie);Ne=P(ut,"t"),ut.forEach(u),ve=P(we," is the current frame, which increments by 1 every frame."),we.forEach(u),me=R(G),he=p(G,"P",{});var ct=_(he);We=P(ct,`I attempted to have expressions evaluated according to the order of operations, but I don't
		think I got it quite working, so I recommend using parenthesis if something doesn't seem right.`),ct.forEach(u),Be=R(G),K=p(G,"P",{});var Me=_(K);Ge=P(Me,"There are two functions that you can use. The first one is "),Ae=p(Me,"CODE",{});var dt=_(Ae);T=P(dt,`if([expr], [if not 0], [if 0])
		`),dt.forEach(u),J=P(Me,", which should be self-explanatory. The other one is "),C=p(Me,"CODE",{});var ft=_(C);be=P(ft,"sin([value])"),ft.forEach(u),pe=P(Me,`, which
		computes the sin of a value, but a full cycle is 0-255 instead of 0-2pi.`),Me.forEach(u),Ie=R(G),_e=p(G,"P",{});var ht=_(_e);Pe=P(ht,`The video is a live stream of my LED lights running whatever equations are written here. If too
		many people use this, it could get crazy. When you type in an equation, it is automatically sent
		to the LED strip.`),ht.forEach(u),De=R(G),ge=p(G,"P",{});var Qe=_(ge);Ce=P(Qe,`This was a random project that I wanted to try. I'll probably set a password on it at some
		point, but I thought I'd let the whole world try it out first. It probably has a lot of bugs and
		I'm not planning to fix them all. I also wrote a `),Te=p(Qe,"A",{href:!0});var pt=_(Te);je=P(pt,"blog post"),pt.forEach(u),Ke=P(Qe," explaining how everything works."),Qe.forEach(u),G.forEach(u),this.h()},h(){b(d,"href","https://en.wikipedia.org/wiki/HSL_and_HSV"),b(Te,"href","https://anb.codes/2022/led-equations"),b(e,"class","prose")},m(Oe,G){N(Oe,e,G),l(e,t),l(t,r),l(e,n),l(e,a),l(a,o),l(e,f),l(e,i),l(i,c),l(i,d),l(d,O),l(i,k),l(e,V),l(e,v),l(v,y),l(e,E),l(e,m),l(m,g),l(m,A),l(A,w),l(m,D),l(m,$),l($,W),l(m,L),l(m,S),l(S,q),l(m,H),l(e,F),l(e,j),l(j,Z),l(j,te),l(te,x),l(j,re),l(j,oe),l(oe,Q),l(j,le),l(j,ke),l(ke,Le),l(j,ye),l(j,ie),l(ie,Ne),l(j,ve),l(e,me),l(e,he),l(he,We),l(e,Be),l(e,K),l(K,Ge),l(K,Ae),l(Ae,T),l(K,J),l(K,C),l(C,be),l(K,pe),l(e,Ie),l(e,_e),l(_e,Pe),l(e,De),l(e,ge),l(ge,Ce),l(ge,Te),l(Te,je),l(ge,Ke)},p:B,i:B,o:B,d(Oe){Oe&&u(e)}}}class Tr extends se{constructor(e){super(),ne(this,e,null,Dr,ae,{})}}function Pt(s,e,t){const r=s.slice();return r[8]=e[t],r}function Dt(s){let e,t;return{c(){e=h("option"),this.h()},l(r){e=p(r,"OPTION",{}),_(e).forEach(u),this.h()},h(){e.__value=t=s[8],e.value=e.__value},m(r,n){N(r,e,n)},p(r,n){n&4&&t!==(t=r[8])&&(e.__value=t,e.value=e.__value)},d(r){r&&u(e)}}}function Ar(s){let e,t,r,n,a,o,f,i,c,d,O,k,V=s[2],v=[];for(let y=0;y<V.length;y+=1)v[y]=Dt(Pt(s,V,y));return{c(){e=h("div"),t=h("label"),r=I("View user"),n=U(),a=h("input"),o=U(),f=h("datalist");for(let y=0;y<v.length;y+=1)v[y].c();i=U(),c=h("div"),d=I(s[1]),this.h()},l(y){e=p(y,"DIV",{});var E=_(e);t=p(E,"LABEL",{for:!0});var m=_(t);r=P(m,"View user"),m.forEach(u),n=R(E),a=p(E,"INPUT",{name:!0,class:!0,placeholder:!0,type:!0,list:!0}),o=R(E),f=p(E,"DATALIST",{id:!0});var g=_(f);for(let w=0;w<v.length;w+=1)v[w].l(g);g.forEach(u),E.forEach(u),i=R(y),c=p(y,"DIV",{class:!0});var A=_(c);d=P(A,s[1]),A.forEach(u),this.h()},h(){b(t,"for","view-user"),b(a,"name","view-user"),b(a,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(a,"placeholder","username"),b(a,"type","search"),b(a,"list","users"),b(f,"id","users"),b(c,"class","text-sm text-red-800")},m(y,E){N(y,e,E),l(e,t),l(t,r),l(e,n),l(e,a),Y(a,s[0]),l(e,o),l(e,f);for(let m=0;m<v.length;m+=1)v[m].m(f,null);N(y,i,E),N(y,c,E),l(c,d),O||(k=[M(a,"input",s[4]),M(a,"input",s[3])],O=!0)},p(y,[E]){if(E&1&&Y(a,y[0]),E&4){V=y[2];let m;for(m=0;m<V.length;m+=1){const g=Pt(y,V,m);v[m]?v[m].p(g,E):(v[m]=Dt(g),v[m].c(),v[m].m(f,null))}for(;m<v.length;m+=1)v[m].d(1);v.length=V.length}E&2&&Ee(d,y[1])},i:B,o:B,d(y){y&&u(e),Xe(v,y),y&&u(i),y&&u(c),O=!1,qe(k)}}}function Or(s,e,t){let r="",n="",a=[];const o=$e();At(async()=>{const O=await fetch("https://leds.spry.workers.dev/users");t(2,a=await O.json()),console.log(a)});const f=async()=>{var V,v;if(!a.includes(r)){t(1,n="User does not exist"),o("view",[]);return}const k=await(await fetch(`https://leds.spry.workers.dev/data?username=${r}`)).json();k.data?(o("view",(v=(V=JSON.parse(k.data))==null?void 0:V.patterns)!=null?v:[]),t(1,n="")):(o("view",[]),t(1,n=""))};let i;const c=()=>{clearTimeout(i),i=setTimeout(f,500)};function d(){r=this.value,t(0,r)}return[r,n,a,c,d]}class Vr extends se{constructor(e){super(),ne(this,e,Or,Ar,ae,{})}}function Tt(s){let e,t;return e=new nr({props:{patterns:s[5]?s[2]:s[0],currentPatternId:s[1],disabled:s[5]}}),e.$on("edit",s[8]),e.$on("newPattern",s[6]),e.$on("remove",s[7]),e.$on("close",s[14]),{c(){ue(e.$$.fragment)},l(r){ce(e.$$.fragment,r)},m(r,n){de(e,r,n),t=!0},p(r,n){const a={};n&37&&(a.patterns=r[5]?r[2]:r[0]),n&2&&(a.currentPatternId=r[1]),n&32&&(a.disabled=r[5]),e.$set(a)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){fe(e,r)}}}function Lr(s){let e,t,r,n,a,o,f,i,c,d,O,k,V,v,y,E,m,g,A,w,D,$,W,L,S,q,H,F,j,Z,te,x,re,oe,Q,le,ke,Le,ye,ie,Ne,ve,me,he;function We(T){s[13](T)}let Be={patterns:s[5]?s[2]:s[0]};s[1]!==void 0&&(Be.currentPatternId=s[1]),f=new Ht({props:Be}),Ze.push(()=>bt(f,"currentPatternId",We)),d=new Bt({props:{disabled:s[5]}}),d.$on("newPattern",s[6]);let K=s[1]!=""&&Tt(s);y=new Pr({props:{patterns:s[5]?s[2]:s[0],currentPatternId:s[1]}}),g=new ur({props:{key:s[4]}}),g.$on("newKey",s[9]),D=new mr({}),D.$on("newKey",s[9]),L=new yr({props:{key:s[4]}}),L.$on("update",s[15]),H=new xt({}),H.$on("click",s[11]),Z=new St({props:{key:s[4]}}),re=new Vr({}),re.$on("view",s[10]);function Ge(T){s[16](T)}let Ae={};return s[3]!==void 0&&(Ae.LEDPassword=s[3]),le=new Yt({props:Ae}),Ze.push(()=>bt(le,"LEDPassword",Ge)),ie=new Tr({}),me=new fr({}),{c(){e=h("header"),t=I("LEDS"),r=U(),n=h("main"),a=h("div"),o=h("div"),ue(f.$$.fragment),c=U(),ue(d.$$.fragment),O=U(),k=h("div"),K&&K.c(),V=U(),v=h("div"),ue(y.$$.fragment),E=U(),m=h("div"),ue(g.$$.fragment),A=U(),w=h("div"),ue(D.$$.fragment),$=U(),W=h("div"),ue(L.$$.fragment),S=U(),q=h("div"),ue(H.$$.fragment),F=U(),j=h("div"),ue(Z.$$.fragment),te=U(),x=h("div"),ue(re.$$.fragment),oe=U(),Q=h("div"),ue(le.$$.fragment),Le=U(),ye=h("div"),ue(ie.$$.fragment),Ne=U(),ve=h("div"),ue(me.$$.fragment),this.h()},l(T){e=p(T,"HEADER",{class:!0});var J=_(e);t=P(J,"LEDS"),J.forEach(u),r=R(T),n=p(T,"MAIN",{class:!0});var C=_(n);a=p(C,"DIV",{class:!0});var be=_(a);o=p(be,"DIV",{class:!0});var pe=_(o);ce(f.$$.fragment,pe),c=R(pe),ce(d.$$.fragment,pe),pe.forEach(u),O=R(be),k=p(be,"DIV",{class:!0});var Ie=_(k);K&&K.l(Ie),Ie.forEach(u),be.forEach(u),V=R(C),v=p(C,"DIV",{class:!0});var _e=_(v);ce(y.$$.fragment,_e),_e.forEach(u),E=R(C),m=p(C,"DIV",{class:!0});var Pe=_(m);ce(g.$$.fragment,Pe),Pe.forEach(u),A=R(C),w=p(C,"DIV",{class:!0});var De=_(w);ce(D.$$.fragment,De),De.forEach(u),$=R(C),W=p(C,"DIV",{class:!0});var ge=_(W);ce(L.$$.fragment,ge),ge.forEach(u),S=R(C),q=p(C,"DIV",{class:!0});var Ce=_(q);ce(H.$$.fragment,Ce),Ce.forEach(u),F=R(C),j=p(C,"DIV",{class:!0});var Te=_(j);ce(Z.$$.fragment,Te),Te.forEach(u),te=R(C),x=p(C,"DIV",{class:!0});var je=_(x);ce(re.$$.fragment,je),je.forEach(u),oe=R(C),Q=p(C,"DIV",{class:!0});var Ke=_(Q);ce(le.$$.fragment,Ke),Ke.forEach(u),Le=R(C),ye=p(C,"DIV",{class:!0});var Oe=_(ye);ce(ie.$$.fragment,Oe),Oe.forEach(u),Ne=R(C),ve=p(C,"DIV",{class:!0});var G=_(ve);ce(me.$$.fragment,G),G.forEach(u),C.forEach(u),this.h()},h(){b(e,"class","pb-10 p-5 text-5xl"),b(o,"class","md:flex flex-col flex-shrink-0 text-2xl w-full md:w-[300px] md:border-r border-gray-800 border-solid pr-4"),He(o,"hidden",s[1]!=""),He(o,"flex",s[1]==""),b(k,"class","pl-5 flex-grow"),b(a,"class","flex"),b(v,"class","my-8"),b(m,"class","my-8"),b(w,"class","my-8"),b(W,"class","my-8"),b(q,"class","my-8"),b(j,"class","my-8"),b(x,"class","my-8"),b(Q,"class","my-8"),b(ye,"class","my-8"),b(ve,"class","my-8"),b(n,"class","p-5")},m(T,J){N(T,e,J),l(e,t),N(T,r,J),N(T,n,J),l(n,a),l(a,o),de(f,o,null),l(o,c),de(d,o,null),l(a,O),l(a,k),K&&K.m(k,null),l(n,V),l(n,v),de(y,v,null),l(n,E),l(n,m),de(g,m,null),l(n,A),l(n,w),de(D,w,null),l(n,$),l(n,W),de(L,W,null),l(n,S),l(n,q),de(H,q,null),l(n,F),l(n,j),de(Z,j,null),l(n,te),l(n,x),de(re,x,null),l(n,oe),l(n,Q),de(le,Q,null),l(n,Le),l(n,ye),de(ie,ye,null),l(n,Ne),l(n,ve),de(me,ve,null),he=!0},p(T,[J]){const C={};J&37&&(C.patterns=T[5]?T[2]:T[0]),!i&&J&2&&(i=!0,C.currentPatternId=T[1],_t(()=>i=!1)),f.$set(C);const be={};J&32&&(be.disabled=T[5]),d.$set(be),(!he||J&2)&&He(o,"hidden",T[1]!=""),(!he||J&2)&&He(o,"flex",T[1]==""),T[1]!=""?K?(K.p(T,J),J&2&&X(K,1)):(K=Tt(T),K.c(),X(K,1),K.m(k,null)):K&&(Nt(),ee(K,1,1,()=>{K=null}),Lt());const pe={};J&37&&(pe.patterns=T[5]?T[2]:T[0]),J&2&&(pe.currentPatternId=T[1]),y.$set(pe);const Ie={};J&16&&(Ie.key=T[4]),g.$set(Ie);const _e={};J&16&&(_e.key=T[4]),L.$set(_e);const Pe={};J&16&&(Pe.key=T[4]),Z.$set(Pe);const De={};!ke&&J&8&&(ke=!0,De.LEDPassword=T[3],_t(()=>ke=!1)),le.$set(De)},i(T){he||(X(f.$$.fragment,T),X(d.$$.fragment,T),X(K),X(y.$$.fragment,T),X(g.$$.fragment,T),X(D.$$.fragment,T),X(L.$$.fragment,T),X(H.$$.fragment,T),X(Z.$$.fragment,T),X(re.$$.fragment,T),X(le.$$.fragment,T),X(ie.$$.fragment,T),X(me.$$.fragment,T),he=!0)},o(T){ee(f.$$.fragment,T),ee(d.$$.fragment,T),ee(K),ee(y.$$.fragment,T),ee(g.$$.fragment,T),ee(D.$$.fragment,T),ee(L.$$.fragment,T),ee(H.$$.fragment,T),ee(Z.$$.fragment,T),ee(re.$$.fragment,T),ee(le.$$.fragment,T),ee(ie.$$.fragment,T),ee(me.$$.fragment,T),he=!1},d(T){T&&u(e),T&&u(r),T&&u(n),fe(f),fe(d),K&&K.d(),fe(y),fe(g),fe(D),fe(L),fe(H),fe(Z),fe(re),fe(le),fe(ie),fe(me)}}}function Nr(s,e,t){let r="",n=!1,a=[],o="",f=[],i=!1,c=["",""];const d=async()=>{console.log("Saving patterns..."),await fetch(`https://leds.spry.workers.dev/data?key=${r}`,{method:"PUT",body:JSON.stringify({patterns:a}),headers:{"Content-Type":"application/json"}})},O=({detail:L})=>{t(0,a=[...a,L]),t(1,o=L.id),i&&t(2,f=[]),d()},k=({detail:L})=>{t(0,a=a.filter(S=>S.id!==L.id)),d()},V=({detail:L})=>{const S=a.findIndex(q=>q.id===o);t(0,a[S]=L,a),d(),E(L)};let v,y=!1;const E=(L,S=!0)=>{if(!+c[0]||!+c[1])return;if(y){clearInterval(v),v=setInterval(()=>{y||(E(L,S),clearInterval(v))},100);return}const{compiled:q}=Se(L.h),{compiled:H}=Se(L.s),{compiled:F}=Se(L.v);if(!q||!H||!F)return;const j=new Uint32Array([+c[0],+c[1]]),Z=new Uint32Array(q),te=new Uint32Array(H),x=new Uint32Array(F),re=new Uint32Array([+S]),oe=new Uint32Array([z.END,0]),Q=new WebSocket("wss://home.anb.codes:13655");y=!0,Q.addEventListener("open",()=>{console.log("Sending..."),Q.send(j.buffer),Q.send(re.buffer),Q.send(Z.buffer),Q.send(oe.buffer),Q.send(te.buffer),Q.send(oe.buffer),Q.send(x.buffer),Q.send(oe.buffer)}),Q.addEventListener("close",()=>{y=!1,console.log("closed")})},m=async({detail:L})=>{var H;t(4,r=L);const q=await(await fetch(`https://leds.spry.workers.dev/data?key=${r}`)).json();if(q.data){const F=JSON.parse(q.data);t(0,a=(H=F==null?void 0:F.patterns)!=null?H:[])}localStorage.setItem("key",L)},g=({detail:L})=>{t(2,f=L)},A=async()=>{console.log("Making new account...");const S=await(await fetch("https://leds.spry.workers.dev/new-user",{method:"POST"})).json();S.key&&(t(4,r=S.key),localStorage.setItem("key",r))};At(async()=>{var q,H,F;t(4,r=(q=localStorage.getItem("key"))!=null?q:""),t(3,c=JSON.parse((H=localStorage.getItem("ledPass"))!=null?H:'["",""]')),r||await A();const S=await(await fetch(`https://leds.spry.workers.dev/data?key=${r}`)).json();if(S.data){const j=JSON.parse(S.data);t(0,a=(F=j==null?void 0:j.patterns)!=null?F:[])}t(12,n=!0)});function w(L){o=L,t(1,o)}const D=()=>t(1,o=""),$=()=>t(4,r);function W(L){c=L,t(3,c)}return s.$$.update=()=>{if(s.$$.dirty&3){const L=a.find(S=>S.id===o);L&&E(L)}s.$$.dirty&4&&t(5,i=f.length!==0),s.$$.dirty&4104&&n&&localStorage.setItem("ledPass",JSON.stringify(c))},[a,o,f,c,r,i,O,k,V,m,g,A,n,w,D,$,W]}class Rr extends se{constructor(e){super(),ne(this,e,Nr,Lr,ae,{})}}export{Rr as default};
