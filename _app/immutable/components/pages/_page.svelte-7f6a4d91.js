import{S as Fe,i as Je,s as Qe,k as v,q as O,a as V,l as m,m as g,r as T,h as u,c as C,n as s,I as q,b as N,G as a,J as B,B as be,K as Ke,L as Ve,o as Ye,u as ae,M as Z,N as De}from"../../chunks/index-f6eecf18.js";const se={INVALID:0,SIN:1,ADD:2,SUB:3,MUL:4,DIV:5,POW:6,MOD:7,IF:8,EQ:9,GT:10,LT:11,AND:12,OR:13,VAL:14,VAR_T:15,VAR_I:16,END:17},Xe=se,Ze=e=>e.split("").map((t,r)=>t==="("?{type:"OPEN_PARAN",rawValue:t,index:r}:t===")"?{type:"CLOSE_PARAN",rawValue:t,index:r}:t===" "?{type:"WHITESPACE",rawValue:t,index:r}:t==="+"?{type:"OPERATOR",operator:"ADD",rawValue:t,index:r}:t==="-"?{type:"OPERATOR",operator:"SUB",rawValue:t,index:r}:t==="*"?{type:"OPERATOR",operator:"MUL",rawValue:t,index:r}:t==="/"?{type:"OPERATOR",operator:"DIV",rawValue:t,index:r}:t==="%"?{type:"OPERATOR",operator:"MOD",rawValue:t,index:r}:t==="^"?{type:"OPERATOR",operator:"POW",rawValue:t,index:r}:t===">"?{type:"OPERATOR",operator:"GT",rawValue:t,index:r}:t==="<"?{type:"OPERATOR",operator:"LT",rawValue:t,index:r}:t==="="?{type:"OPERATOR",operator:"EQ",rawValue:t,index:r}:t===","?{type:"OPERATOR",operator:"SEP",rawValue:t,index:r}:t==="&"?{type:"OPERATOR",operator:"AND",rawValue:t,index:r}:t==="|"?{type:"OPERATOR",operator:"OR",rawValue:t,index:r}:{type:"LITERAL",value:t,rawValue:t,index:r}),je=[["SEP"],["AND","OR"],["GT","LT","EQ"],["MOD"],["ADD","SUB"],["DIV","MUL"]];class ie extends Error{constructor(t,r){super(t),this.index=r}}const de=(e,t)=>{if(e.length===0)throw new ie("Expected an expression",t);for(let i=0;i<je.length;i++){const f=je[i];let _=0;for(let c=0;c<e.length;c++){const l=e[c];if(l.type==="OPEN_PARAN"&&(_+=1),l.type==="CLOSE_PARAN"&&(_-=1),l.type==="OPERATOR"&&_==0&&f.includes(l.operator))return{type:"operator",op:l.operator,a:de(e.slice(0,c),e[0].index+1),b:de(e.slice(c+1),l.index+1),index:l.index}}}let r="",p=-1;for(let i=0;i<e.length;i++){const f=e[i];if(f.type==="LITERAL"&&(r+=f.value,p===-1&&(p=f.index)),f.type==="OPEN_PARAN"){if(e.slice(-1)[0].type!=="CLOSE_PARAN")throw new ie("Unmatched opening parenthesis",f.index);if(r){const _=de(e.slice(i+1,-1),f.index),c=[],l=y=>{y.type==="operator"&&y.op==="SEP"?(l(y.a),l(y.b)):c.push(y)};return l(_),{type:"call",name:r,args:c,index:p}}else return de(e.slice(i+1,-1),f.index)}}const d=e.find(i=>i.type!=="LITERAL");if(d)throw new ie(`Unexpected token: ${d.rawValue}`,d.index);return r=e.map(i=>i.value).join(""),isNaN(parseInt(r,10))?{type:"variable",name:r,index:e[0].index}:{type:"value",val:parseInt(r,10),index:e[0].index}},ne=e=>{if(e.type==="call"){if(e.name==="if")return[...ne(e.args[0]),...ne(e.args[1]),...ne(e.args[2]),se.IF];if(e.name==="sin")return[...ne(e.args[0]),se.SIN];throw new ie(`Invalid function: ${e.name}`,e.index)}else if(e.type==="operator"){const t=Xe[e.op];if(t===void 0)throw new ie(`Invalid operator: ${e.op}`,e.index);return[...ne(e.a),...ne(e.b),t]}else{if(e.type==="value")return[se.VAL,e.val];if(e.type==="variable"){if(e.name==="i")return[se.VAR_I];if(e.name==="t")return[se.VAR_T];throw new ie(`Unknown variable: ${e.name}`,e.index)}else throw new Error("INVALID TYPE")}},qe=e=>{try{const t=Ze(e),r=de(t.filter(d=>d.type!=="WHITESPACE"),0);return{compiled:ne(r)}}catch(t){if(t instanceof ie)return{error:`Error: ${t.message}
    ${e}
    ${" ".repeat(t.index)}^`,errorRaw:t};throw t}};function We(e,t,r){const p=e.slice();return p[21]=t[r],p[23]=r,p}function Ge(e){let t,r=e[21].name+"",p,d,i,f;function _(){return e[7](e[21])}return{c(){t=v("button"),p=O(r),this.h()},l(c){t=m(c,"BUTTON",{class:!0});var l=g(t);p=T(l,r),l.forEach(u),this.h()},h(){s(t,"class",d="border-gray-800 p-2 mx-2 border-solid border-b "+(e[21]===e[1]?"":"hover:bg-gray-200")+" active:bg-gray-300"),q(t,"bg-gray-300",e[21]===e[1]),q(t,"border-t",e[23]===0)},m(c,l){N(c,t,l),a(t,p),i||(f=B(t,"click",_),i=!0)},p(c,l){e=c,l&1&&r!==(r=e[21].name+"")&&ae(p,r),l&3&&d!==(d="border-gray-800 p-2 mx-2 border-solid border-b "+(e[21]===e[1]?"":"hover:bg-gray-200")+" active:bg-gray-300")&&s(t,"class",d),l&3&&q(t,"bg-gray-300",e[21]===e[1]),l&3&&q(t,"border-t",e[23]===0)},d(c){c&&u(t),i=!1,f()}}}function He(e){let t,r,p,d,i,f,_,c,l,y,L,W,E,J,S,Q,z=e[1].h.value+"",x,M,G,H=e[1].h.error+"",K,j,o,b,n,h,w,I,k,P=e[1].s.value+"",$,ee,Y,X=e[1].s.error+"",te,re,le,ue,_e,U,Ee,ce,fe=e[1].v.error+"",he,ge,oe,ye,pe=e[1].v.value+"",ve,we,Ce;function Ne(R,A){return R[2]?et:$e}let me=Ne(e),F=me(e);return{c(){t=v("div"),r=v("button"),p=O("Back"),d=V(),i=v("div"),F.c(),f=V(),_=v("input"),c=V(),l=v("div"),y=v("div"),L=v("label"),W=O("h = "),E=v("input"),J=V(),S=v("pre"),Q=O("    "),x=O(z),M=V(),G=v("pre"),K=O(H),j=V(),o=v("div"),b=v("label"),n=O("s = "),h=v("input"),w=V(),I=v("pre"),k=O("    "),$=O(P),ee=V(),Y=v("pre"),te=O(X),re=V(),le=v("div"),ue=v("label"),_e=O("v = "),U=v("input"),Ee=V(),ce=v("pre"),he=O(fe),ge=V(),oe=v("pre"),ye=O("    "),ve=O(pe),this.h()},l(R){t=m(R,"DIV",{class:!0});var A=g(t);r=m(A,"BUTTON",{class:!0});var Le=g(r);p=T(Le,"Back"),Le.forEach(u),d=C(A),i=m(A,"DIV",{class:!0});var Se=g(i);F.l(Se),Se.forEach(u),A.forEach(u),f=C(R),_=m(R,"INPUT",{type:!0,class:!0}),c=C(R),l=m(R,"DIV",{class:!0});var D=g(l);y=m(D,"DIV",{class:!0});var Ae=g(y);L=m(Ae,"LABEL",{for:!0});var ke=g(L);W=T(ke,"h = "),ke.forEach(u),E=m(Ae,"INPUT",{name:!0,class:!0,type:!0,autocomplete:!0,autocorrect:!0,autocapitalize:!0,spellcheck:!0}),Ae.forEach(u),J=C(D),S=m(D,"PRE",{class:!0});var Re=g(S);Q=T(Re,"    "),x=T(Re,z),Re.forEach(u),M=C(D),G=m(D,"PRE",{});var Ue=g(G);K=T(Ue,H),Ue.forEach(u),j=C(D),o=m(D,"DIV",{class:!0});var Oe=g(o);b=m(Oe,"LABEL",{for:!0});var xe=g(b);n=T(xe,"s = "),xe.forEach(u),h=m(Oe,"INPUT",{name:!0,class:!0,type:!0,autocomplete:!0,autocorrect:!0,autocapitalize:!0,spellcheck:!0}),Oe.forEach(u),w=C(D),I=m(D,"PRE",{class:!0});var Te=g(I);k=T(Te,"    "),$=T(Te,P),Te.forEach(u),ee=C(D),Y=m(D,"PRE",{});var Be=g(Y);te=T(Be,X),Be.forEach(u),re=C(D),le=m(D,"DIV",{class:!0});var Ie=g(le);ue=m(Ie,"LABEL",{for:!0});var Me=g(ue);_e=T(Me,"v = "),Me.forEach(u),U=m(Ie,"INPUT",{name:!0,class:!0,type:!0,autocomplete:!0,autocorrect:!0,autocapitalize:!0,spellcheck:!0}),Ie.forEach(u),Ee=C(D),ce=m(D,"PRE",{});var ze=g(ce);he=T(ze,fe),ze.forEach(u),ge=C(D),oe=m(D,"PRE",{class:!0});var Pe=g(oe);ye=T(Pe,"    "),ve=T(Pe,pe),Pe.forEach(u),D.forEach(u),this.h()},h(){s(r,"class","text-base md:hidden rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300"),s(i,"class","flex md:flex-row-reverse"),s(t,"class","flex justify-between"),s(_,"type","text"),s(_,"class","focus:outline-none text-2xl w-full py-3"),s(L,"for","h"),s(E,"name","h"),s(E,"class","pl-4 font-mono focus:outline-none w-full"),s(E,"type","text"),s(E,"autocomplete","off"),s(E,"autocorrect","off"),s(E,"autocapitalize","off"),s(E,"spellcheck","false"),s(y,"class","flex whitespace-nowrap py-2"),s(S,"class","h-0 invisible"),s(b,"for","s"),s(h,"name","s"),s(h,"class","pl-4 font-mono focus:outline-none w-full"),s(h,"type","text"),s(h,"autocomplete","off"),s(h,"autocorrect","off"),s(h,"autocapitalize","off"),s(h,"spellcheck","false"),s(o,"class","flex whitespace-nowrap py-2"),s(I,"class","h-0 invisible"),s(ue,"for","v"),s(U,"name","v"),s(U,"class","pl-4 font-mono focus:outline-none w-full"),s(U,"type","text"),s(U,"autocomplete","off"),s(U,"autocorrect","off"),s(U,"autocapitalize","off"),s(U,"spellcheck","false"),s(le,"class","flex whitespace-nowrap py-2"),s(oe,"class","h-0 invisible"),s(l,"class","pl-10")},m(R,A){N(R,t,A),a(t,r),a(r,p),a(t,d),a(t,i),F.m(i,null),N(R,f,A),N(R,_,A),Z(_,e[1].name),N(R,c,A),N(R,l,A),a(l,y),a(y,L),a(L,W),a(y,E),Z(E,e[1].h.value),a(l,J),a(l,S),a(S,Q),a(S,x),a(l,M),a(l,G),a(G,K),a(l,j),a(l,o),a(o,b),a(b,n),a(o,h),Z(h,e[1].s.value),a(l,w),a(l,I),a(I,k),a(I,$),a(l,ee),a(l,Y),a(Y,te),a(l,re),a(l,le),a(le,ue),a(ue,_e),a(le,U),Z(U,e[1].v.value),a(l,Ee),a(l,ce),a(ce,he),a(l,ge),a(l,oe),a(oe,ye),a(oe,ve),we||(Ce=[B(r,"click",e[8]),B(_,"input",e[12]),B(E,"input",e[13]),B(E,"input",function(){De(e[1].h.onChange)&&e[1].h.onChange.apply(this,arguments)}),B(h,"input",e[14]),B(h,"input",function(){De(e[1].s.onChange)&&e[1].s.onChange.apply(this,arguments)}),B(U,"input",e[15]),B(U,"input",function(){De(e[1].v.onChange)&&e[1].v.onChange.apply(this,arguments)})],we=!0)},p(R,A){e=R,me===(me=Ne(e))&&F?F.p(e,A):(F.d(1),F=me(e),F&&(F.c(),F.m(i,null))),A&2&&_.value!==e[1].name&&Z(_,e[1].name),A&2&&E.value!==e[1].h.value&&Z(E,e[1].h.value),A&2&&z!==(z=e[1].h.value+"")&&ae(x,z),A&2&&H!==(H=e[1].h.error+"")&&ae(K,H),A&2&&h.value!==e[1].s.value&&Z(h,e[1].s.value),A&2&&P!==(P=e[1].s.value+"")&&ae($,P),A&2&&X!==(X=e[1].s.error+"")&&ae(te,X),A&2&&U.value!==e[1].v.value&&Z(U,e[1].v.value),A&2&&fe!==(fe=e[1].v.error+"")&&ae(he,fe),A&2&&pe!==(pe=e[1].v.value+"")&&ae(ve,pe)},d(R){R&&u(t),F.d(),R&&u(f),R&&u(_),R&&u(c),R&&u(l),we=!1,Ve(Ce)}}}function $e(e){let t,r,p,d;return{c(){t=v("button"),r=O("Delete"),this.h()},l(i){t=m(i,"BUTTON",{class:!0});var f=g(t);r=T(f,"Delete"),f.forEach(u),this.h()},h(){s(t,"class","text-base rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300")},m(i,f){N(i,t,f),a(t,r),p||(d=B(t,"click",e[11]),p=!0)},p:be,d(i){i&&u(t),p=!1,d()}}}function et(e){let t,r,p,d,i,f,_;return{c(){t=v("button"),r=O("Confirm Delete"),p=V(),d=v("button"),i=O("Cancel Delete"),this.h()},l(c){t=m(c,"BUTTON",{class:!0});var l=g(t);r=T(l,"Confirm Delete"),l.forEach(u),p=C(c),d=m(c,"BUTTON",{class:!0});var y=g(d);i=T(y,"Cancel Delete"),y.forEach(u),this.h()},h(){s(t,"class","text-base rounded border-green-800 text-green-800 border-solid border py-1 px-3 mb-4 mx-2 hover:bg-gray-200 active:bg-gray-300"),s(d,"class","text-base rounded border-red-800 text-red-800 border-solid border py-1 px-3 mb-4 mx-2 hover:bg-gray-200 active:bg-gray-300")},m(c,l){N(c,t,l),a(t,r),N(c,p,l),N(c,d,l),a(d,i),f||(_=[B(t,"click",e[9]),B(d,"click",e[10])],f=!0)},p:be,d(c){c&&u(t),c&&u(p),c&&u(d),f=!1,Ve(_)}}}function tt(e){let t,r,p,d,i,f,_,c,l,y,L,W,E,J,S,Q,z,x,M,G,H,K,j=e[0],o=[];for(let n=0;n<j.length;n+=1)o[n]=Ge(We(e,j,n));let b=e[1]&&He(e);return{c(){t=v("header"),r=v("h1"),p=O("LEDS"),d=V(),i=v("div"),f=v("div");for(let n=0;n<o.length;n+=1)o[n].c();_=V(),c=v("button"),l=O("Add equation"),y=V(),L=v("div"),b&&b.c(),W=V(),E=v("div"),J=V(),S=v("script"),Q=O(`var a = function () {
			window.mainvideo = mistPlay('live', {
				target: document.getElementById('live_RDhIpDwdElfL'),
				muted: true,
				urlappend: '?video=lowbps,lowres&audio=lowbps',
				forcePriority: {
					source: [['type', ['webrtc']]]
				},
				monitor: {
					action: () => {}
				}
			});
		};
		if (!window.mistplayers) {
			var p = document.createElement('script');
			p.src = 'http://home.anb.codes:48080/player.js';
			document.head.appendChild(p);
			p.onload = a;
		} else {
			a();
		}`),z=V(),x=v("div"),M=v("button"),G=O("Reload Page"),this.h()},l(n){t=m(n,"HEADER",{class:!0});var h=g(t);r=m(h,"H1",{class:!0});var w=g(r);p=T(w,"LEDS"),w.forEach(u),h.forEach(u),d=C(n),i=m(n,"DIV",{class:!0});var I=g(i);f=m(I,"DIV",{class:!0});var k=g(f);for(let re=0;re<o.length;re+=1)o[re].l(k);_=C(k),c=m(k,"BUTTON",{class:!0});var P=g(c);l=T(P,"Add equation"),P.forEach(u),k.forEach(u),y=C(I),L=m(I,"DIV",{class:!0});var $=g(L);b&&b.l($),$.forEach(u),I.forEach(u),W=C(n),E=m(n,"DIV",{class:!0,id:!0});var ee=g(E);J=C(ee),S=m(ee,"SCRIPT",{});var Y=g(S);Q=T(Y,`var a = function () {
			window.mainvideo = mistPlay('live', {
				target: document.getElementById('live_RDhIpDwdElfL'),
				muted: true,
				urlappend: '?video=lowbps,lowres&audio=lowbps',
				forcePriority: {
					source: [['type', ['webrtc']]]
				},
				monitor: {
					action: () => {}
				}
			});
		};
		if (!window.mistplayers) {
			var p = document.createElement('script');
			p.src = 'http://home.anb.codes:48080/player.js';
			document.head.appendChild(p);
			p.onload = a;
		} else {
			a();
		}`),Y.forEach(u),ee.forEach(u),z=C(n),x=m(n,"DIV",{class:!0});var X=g(x);M=m(X,"BUTTON",{class:!0});var te=g(M);G=T(te,"Reload Page"),te.forEach(u),X.forEach(u),this.h()},h(){s(r,"class","text-5xl "),s(t,"class","pb-10 p-5"),s(c,"class","mt-14 rounded border-gray-800 border-solid border py-4 hover:bg-gray-200 active:bg-gray-300"),s(f,"class","md:flex flex-col flex-shrink-0 text-2xl w-full md:w-[300px] md:border-r border-gray-800 border-solid pr-4"),q(f,"hidden",e[1]),q(f,"flex",!e[1]),s(L,"class","pl-5 flex-grow"),s(i,"class","p-4 font-sans flex"),s(E,"class","mistvideo"),s(E,"id","live_RDhIpDwdElfL"),s(M,"class","text-1xl mt-20 rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300"),s(x,"class","p-4 flex flex-col")},m(n,h){N(n,t,h),a(t,r),a(r,p),N(n,d,h),N(n,i,h),a(i,f);for(let w=0;w<o.length;w+=1)o[w].m(f,null);a(f,_),a(f,c),a(c,l),a(i,y),a(i,L),b&&b.m(L,null),N(n,W,h),N(n,E,h),a(E,J),a(E,S),a(S,Q),N(n,z,h),N(n,x,h),a(x,M),a(M,G),H||(K=[B(c,"click",e[4]),B(M,"click",e[16])],H=!0)},p(n,[h]){if(h&11){j=n[0];let w;for(w=0;w<j.length;w+=1){const I=We(n,j,w);o[w]?o[w].p(I,h):(o[w]=Ge(I),o[w].c(),o[w].m(f,_))}for(;w<o.length;w+=1)o[w].d(1);o.length=j.length}h&2&&q(f,"hidden",n[1]),h&2&&q(f,"flex",!n[1]),n[1]?b?b.p(n,h):(b=He(n),b.c(),b.m(L,null)):b&&(b.d(1),b=null)},i:be,o:be,d(n){n&&u(t),n&&u(d),n&&u(i),Ke(o,n),b&&b.d(),n&&u(W),n&&u(E),n&&u(z),n&&u(x),H=!1,Ve(K)}}}function rt(e,t,r){let p=[],d=!1,i=!1;Ye(()=>{window.location.protocol==="https:"&&(window.location.protocol="http:"),r(0,p=JSON.parse(localStorage.getItem("equations")||"[]")),p.forEach(o=>{o.h.onChange=y(o.h,o),o.s.onChange=y(o.s,o),o.v.onChange=y(o.v,o),o.h.onChange(),o.s.onChange(),o.v.onChange()}),i=!0,r(6,d=!0),setTimeout(()=>{document.querySelectorAll("input").forEach(o=>{o.style.width=Math.max(o.value.length+5,10)+"ch"})})});let f=!1,_;const c=(o,b=!0)=>{if(!i||o.h.error||o.s.error||o.v.error)return;f&&(_&&clearInterval(_),_=setInterval(()=>{f||(c(o,b),clearInterval(_))},1));const n=new Uint32Array(o.h.compiledValue),h=new Uint32Array(o.s.compiledValue),w=new Uint32Array(o.v.compiledValue),I=new Uint32Array([+b]),k=new Uint32Array([se.END,0]),P=new WebSocket("ws://home.anb.codes:13655");f=!0,P.addEventListener("open",()=>{console.log("Sending..."),P.send(I.buffer),console.log(I),P.send(n.buffer),console.log(n),P.send(k.buffer),console.log(k),P.send(h.buffer),console.log(h),P.send(k.buffer),console.log(k),P.send(w.buffer),console.log(w),P.send(k.buffer),console.log(k)}),P.addEventListener("close",()=>{f=!1,console.log("closed")})};let l;const y=(o,b)=>()=>{const n=qe(o.value);n.error?o.error=n.error:(o.error="",o.compiledValue=n.compiled),c(b),r(0,p),r(1,l)},L=()=>{const o={h:{value:"",compiledValue:[],onChange:()=>{},error:""},s:{value:"",compiledValue:[],onChange:()=>{},error:""},v:{value:"",compiledValue:[],onChange:()=>{},error:""},name:"New Equation",open:!0};o.h.onChange=y(o.h,o),o.s.onChange=y(o.s,o),o.v.onChange=y(o.v,o),o.h.onChange(),o.s.onChange(),o.v.onChange(),p.forEach(b=>b.open=!1),p.push(o),r(0,p),r(1,l)},W=o=>{r(0,p=p.filter(b=>b!==o))};let E=!1;const J=o=>{r(1,l=o),c(l)},S=()=>{r(1,l=void 0)},Q=()=>{r(2,E=!1),l&&W(l),r(1,l=void 0)},z=()=>r(2,E=!1),x=()=>r(2,E=!0);function M(){l.name=this.value,r(1,l)}function G(){l.h.value=this.value,r(1,l)}function H(){l.s.value=this.value,r(1,l)}function K(){l.v.value=this.value,r(1,l)}const j=()=>location.reload();return e.$$.update=()=>{e.$$.dirty&3&&l&&(r(0,p),r(1,l)),e.$$.dirty&65&&d&&localStorage.setItem("equations",JSON.stringify(p))},[p,l,E,c,L,W,d,J,S,Q,z,x,M,G,H,K,j]}class ot extends Fe{constructor(t){super(),Je(this,t,rt,tt,Qe,{})}}export{ot as default};
