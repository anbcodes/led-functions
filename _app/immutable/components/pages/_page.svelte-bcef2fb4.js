import{S as re,i as ne,s as se,k as h,q as k,a as N,l as p,m as _,r as I,h as u,c as U,n as b,b as L,G as l,I as M,u as Ee,B as C,J as $e,e as mt,K as Xe,L as He,M as J,N as qe,O as Ze,o as At,P as bt,w as le,x as ie,y as ue,Q as _t,f as X,t as ee,d as Lt,z as ce,g as Nt}from"../../chunks/index-52d356fa.js";function yt(n){let e,t,r;return{c(){e=h("div"),t=k("Key: "),r=k(n[0]),this.h()},l(s){e=p(s,"DIV",{class:!0});var a=_(e);t=I(a,"Key: "),r=I(a,n[0]),a.forEach(u),this.h()},h(){b(e,"class","mt-5")},m(s,a){L(s,e,a),l(e,t),l(e,r)},p(s,a){a&1&&Ee(r,s[0])},d(s){s&&u(e)}}}function Ut(n){let e,t,r,s,a,o,f,i=n[2]?"Hide":"Show",c,d,V,E,A,v=n[2]&&yt(n);return{c(){e=h("div"),t=h("div"),r=h("div"),s=k("User: "),a=k(n[1]),o=N(),f=h("button"),c=k(i),d=k(" key"),V=N(),v&&v.c(),this.h()},l(y){e=p(y,"DIV",{class:!0});var P=_(e);t=p(P,"DIV",{class:!0});var m=_(t);r=p(m,"DIV",{class:!0});var g=_(r);s=I(g,"User: "),a=I(g,n[1]),g.forEach(u),o=U(m),f=p(m,"BUTTON",{class:!0});var O=_(f);c=I(O,i),d=I(O," key"),O.forEach(u),m.forEach(u),V=U(P),v&&v.l(P),P.forEach(u),this.h()},h(){b(r,"class","mr-4 flex items-center"),b(f,"class","rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300"),b(t,"class","flex"),b(e,"class","flex flex-col")},m(y,P){L(y,e,P),l(e,t),l(t,r),l(r,s),l(r,a),l(t,o),l(t,f),l(f,c),l(f,d),l(e,V),v&&v.m(e,null),E||(A=M(f,"click",n[3]),E=!0)},p(y,[P]){P&2&&Ee(a,y[1]),P&4&&i!==(i=y[2]?"Hide":"Show")&&Ee(c,i),y[2]?v?v.p(y,P):(v=yt(y),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i:C,o:C,d(y){y&&u(e),v&&v.d(),E=!1,A()}}}function Rt(n,e,t){let{key:r}=e,s="",a=!1;const o=async i=>{if(!i)return;const d=await(await fetch(`https://leds.spry.workers.dev/get-username?key=${i}`,{method:"GET"})).json();d.username&&t(1,s=d.username)},f=()=>t(2,a=!a);return n.$$set=i=>{"key"in i&&t(0,r=i.key)},n.$$.update=()=>{n.$$.dirty&1&&o(r)},[r,s,a,f]}class St extends re{constructor(e){super(),ne(this,e,Rt,Ut,se,{key:0})}}const Vt=(n=25)=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890",t=new Uint8Array(n);return crypto.getRandomValues(t),[...t].map(r=>e[Math.round(r/255*e.length)]).join("")};function $t(n){let e,t,r,s;return{c(){e=h("button"),t=k("Add Pattern"),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var o=_(e);t=I(o,"Add Pattern"),o.forEach(u),this.h()},h(){b(e,"class","mt-14 rounded border-gray-800 border-solid border py-4 hover:bg-gray-200 active:bg-gray-300 disabled:hover:bg-white disabled:border-gray-500 disabled:text-gray-500"),e.disabled=n[0]},m(a,o){L(a,e,o),l(e,t),r||(s=M(e,"click",n[1]),r=!0)},p(a,[o]){o&1&&(e.disabled=a[0])},i:C,o:C,d(a){a&&u(e),r=!1,s()}}}function qt(n,e,t){let{disabled:r=!1}=e;const s=$e(),a=()=>{s("newPattern",{name:"New Pattern",h:"",s:"",v:"",id:Vt()})};return n.$$set=o=>{"disabled"in o&&t(0,r=o.disabled)},[r,a]}class Bt extends re{constructor(e){super(),ne(this,e,qt,$t,se,{disabled:0})}}const Q={INVALID:0,SIN:1,ADD:2,SUB:3,MUL:4,DIV:5,POW:6,MOD:7,IF:8,EQ:9,GT:10,LT:11,AND:12,OR:13,VAL:14,VAR_T:15,VAR_I:16,END:17},Ct=Q,jt=n=>n.split("").map((e,t)=>e==="("?{type:"OPEN_PARAN",rawValue:e,index:t}:e===")"?{type:"CLOSE_PARAN",rawValue:e,index:t}:e===" "?{type:"WHITESPACE",rawValue:e,index:t}:e==="+"?{type:"OPERATOR",operator:"ADD",rawValue:e,index:t}:e==="-"?{type:"OPERATOR",operator:"SUB",rawValue:e,index:t}:e==="*"?{type:"OPERATOR",operator:"MUL",rawValue:e,index:t}:e==="/"?{type:"OPERATOR",operator:"DIV",rawValue:e,index:t}:e==="%"?{type:"OPERATOR",operator:"MOD",rawValue:e,index:t}:e==="^"?{type:"OPERATOR",operator:"POW",rawValue:e,index:t}:e===">"?{type:"OPERATOR",operator:"GT",rawValue:e,index:t}:e==="<"?{type:"OPERATOR",operator:"LT",rawValue:e,index:t}:e==="="?{type:"OPERATOR",operator:"EQ",rawValue:e,index:t}:e===","?{type:"OPERATOR",operator:"SEP",rawValue:e,index:t}:e==="&"?{type:"OPERATOR",operator:"AND",rawValue:e,index:t}:e==="|"?{type:"OPERATOR",operator:"OR",rawValue:e,index:t}:{type:"LITERAL",value:e,rawValue:e,index:t}),vt=[["SEP"],["AND","OR"],["GT","LT","EQ"],["MOD"],["ADD","SUB"],["DIV","MUL"]];class Re extends Error{constructor(e,t){super(e),this.index=t}}const ze=(n,e)=>{if(n.length===0)throw new Re("Expected an expression",e);for(let a=0;a<vt.length;a++){const o=vt[a];let f=0;for(let i=0;i<n.length;i++){const c=n[i];if(c.type==="OPEN_PARAN"&&(f+=1),c.type==="CLOSE_PARAN"&&(f-=1),c.type==="OPERATOR"&&f==0&&o.includes(c.operator))return{type:"operator",op:c.operator,a:ze(n.slice(0,i),n[0].index+1),b:ze(n.slice(i+1),c.index+1),index:c.index}}}let t="",r=-1;for(let a=0;a<n.length;a++){const o=n[a];if(o.type==="LITERAL"&&(t+=o.value,r===-1&&(r=o.index)),o.type==="OPEN_PARAN"){if(n.slice(-1)[0].type!=="CLOSE_PARAN")throw new Re("Unmatched opening parenthesis",o.index);if(t){const f=ze(n.slice(a+1,-1),o.index),i=[],c=d=>{d.type==="operator"&&d.op==="SEP"?(c(d.a),c(d.b)):i.push(d)};return c(f),{type:"call",name:t,args:i,index:r}}else return ze(n.slice(a+1,-1),o.index)}}const s=n.find(a=>a.type!=="LITERAL");if(s)throw new Re(`Unexpected token: ${s.rawValue}`,s.index);return t=n.map(a=>a.value).join(""),isNaN(parseInt(t,10))?{type:"variable",name:t,index:n[0].index}:{type:"value",val:parseInt(t,10),index:n[0].index}},Ue=n=>{if(n.type==="call"){if(n.name==="if")return[...Ue(n.args[0]),...Ue(n.args[1]),...Ue(n.args[2]),Q.IF];if(n.name==="sin")return[...Ue(n.args[0]),Q.SIN];throw new Re(`Invalid function: ${n.name}`,n.index)}else if(n.type==="operator"){const e=Ct[n.op];if(e===void 0)throw new Re(`Invalid operator: ${n.op}`,n.index);return[...Ue(n.a),...Ue(n.b),e]}else{if(n.type==="value")return[Q.VAL,n.val];if(n.type==="variable"){if(n.name==="i")return[Q.VAR_I];if(n.name==="t")return[Q.VAR_T];throw new Re(`Unknown variable: ${n.name}`,n.index)}else throw new Error("INVALID TYPE")}},Se=n=>{try{const e=jt(n),t=ze(e.filter(s=>s.type!=="WHITESPACE"),0);return{compiled:Ue(t)}}catch(e){if(e instanceof Re)return{error:`Error: ${e.message}
    ${n}
    ${" ".repeat(e.index)}^`,errorRaw:e};throw e}};function gt(n,e,t){const r=n.slice();return r[3]=e[t],r[5]=t,r}function wt(n){let e,t=n[3].name+"",r,s,a,o;function f(){return n[2](n[3])}return{c(){e=h("button"),r=k(t),this.h()},l(i){e=p(i,"BUTTON",{class:!0});var c=_(e);r=I(c,t),c.forEach(u),this.h()},h(){b(e,"class",s=(n[0]!=n[3].id?"hover:bg-gray-200":"bg-gray-300")+" border-gray-800 p-2 mx-2 border-solid border-b active:bg-gray-300"),He(e,"border-t",n[5]===0)},m(i,c){L(i,e,c),l(e,r),a||(o=M(e,"click",f),a=!0)},p(i,c){n=i,c&2&&t!==(t=n[3].name+"")&&Ee(r,t),c&3&&s!==(s=(n[0]!=n[3].id?"hover:bg-gray-200":"bg-gray-300")+" border-gray-800 p-2 mx-2 border-solid border-b active:bg-gray-300")&&b(e,"class",s),c&3&&He(e,"border-t",n[5]===0)},d(i){i&&u(e),a=!1,o()}}}function Kt(n){let e,t=n[1],r=[];for(let s=0;s<t.length;s+=1)r[s]=wt(gt(n,t,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=mt()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);e=mt()},m(s,a){for(let o=0;o<r.length;o+=1)r[o].m(s,a);L(s,e,a)},p(s,[a]){if(a&3){t=s[1];let o;for(o=0;o<t.length;o+=1){const f=gt(s,t,o);r[o]?r[o].p(f,a):(r[o]=wt(f),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},i:C,o:C,d(s){Xe(r,s),s&&u(e)}}}function Mt(n,e,t){let{patterns:r}=e,{currentPatternId:s}=e;const a=o=>t(0,s=o.id);return n.$$set=o=>{"patterns"in o&&t(1,r=o.patterns),"currentPatternId"in o&&t(0,s=o.currentPatternId)},[s,r,a]}class Ht extends re{constructor(e){super(),ne(this,e,Mt,Kt,se,{patterns:1,currentPatternId:0})}}function Wt(n){let e,t,r;return{c(){e=h("input"),this.h()},l(s){e=p(s,"INPUT",{class:!0,name:!0,type:!0}),this.h()},h(){b(e,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(e,"name","p1"),b(e,"type","password")},m(s,a){L(s,e,a),J(e,n[0][0]),t||(r=M(e,"input",n[3]),t=!0)},p(s,a){a&1&&e.value!==s[0][0]&&J(e,s[0][0])},d(s){s&&u(e),t=!1,r()}}}function Gt(n){let e,t,r;return{c(){e=h("input"),this.h()},l(s){e=p(s,"INPUT",{class:!0,name:!0,type:!0}),this.h()},h(){b(e,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(e,"name","p1"),b(e,"type","text")},m(s,a){L(s,e,a),J(e,n[0][0]),t||(r=M(e,"input",n[2]),t=!0)},p(s,a){a&1&&e.value!==s[0][0]&&J(e,s[0][0])},d(s){s&&u(e),t=!1,r()}}}function zt(n){let e,t,r;return{c(){e=h("input"),this.h()},l(s){e=p(s,"INPUT",{class:!0,name:!0,type:!0}),this.h()},h(){b(e,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(e,"name","p2"),b(e,"type","password")},m(s,a){L(s,e,a),J(e,n[0][1]),t||(r=M(e,"input",n[5]),t=!0)},p(s,a){a&1&&e.value!==s[0][1]&&J(e,s[0][1])},d(s){s&&u(e),t=!1,r()}}}function Qt(n){let e,t,r;return{c(){e=h("input"),this.h()},l(s){e=p(s,"INPUT",{class:!0,name:!0,type:!0}),this.h()},h(){b(e,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(e,"name","p2"),b(e,"type","text")},m(s,a){L(s,e,a),J(e,n[0][1]),t||(r=M(e,"input",n[4]),t=!0)},p(s,a){a&1&&e.value!==s[0][1]&&J(e,s[0][1])},d(s){s&&u(e),t=!1,r()}}}function Ft(n){let e,t,r,s,a,o,f,i,c,d,V,E,A,v,y=n[1]?"Hide":"Show",P,m,g;function O(q,B){return q[1]?Gt:Wt}let w=O(n),D=w(n);function S(q,B){return q[1]?Qt:zt}let R=S(n),$=R(n);return{c(){e=h("div"),t=k(`LEDs Password
	`),r=h("div"),s=h("label"),a=k("Part 1"),o=N(),D.c(),f=N(),i=h("div"),c=h("label"),d=k("Part 2"),V=N(),$.c(),E=N(),A=h("div"),v=h("button"),P=k(y),this.h()},l(q){e=p(q,"DIV",{});var B=_(e);t=I(B,`LEDs Password
	`),r=p(B,"DIV",{class:!0});var G=_(r);s=p(G,"LABEL",{for:!0});var de=_(s);a=I(de,"Part 1"),de.forEach(u),o=U(G),D.l(G),G.forEach(u),f=U(B),i=p(B,"DIV",{class:!0});var H=_(i);c=p(H,"LABEL",{for:!0});var Y=_(c);d=I(Y,"Part 2"),Y.forEach(u),V=U(H),$.l(H),H.forEach(u),E=U(B),A=p(B,"DIV",{});var te=_(A);v=p(te,"BUTTON",{class:!0});var x=_(v);P=I(x,y),x.forEach(u),te.forEach(u),B.forEach(u),this.h()},h(){b(s,"for","p1"),b(r,"class","m-3"),b(c,"for","p2"),b(i,"class","m-3"),b(v,"class","text-1xl mt-2 rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300")},m(q,B){L(q,e,B),l(e,t),l(e,r),l(r,s),l(s,a),l(r,o),D.m(r,null),l(e,f),l(e,i),l(i,c),l(c,d),l(i,V),$.m(i,null),l(e,E),l(e,A),l(A,v),l(v,P),m||(g=M(v,"click",n[6]),m=!0)},p(q,[B]){w===(w=O(q))&&D?D.p(q,B):(D.d(1),D=w(q),D&&(D.c(),D.m(r,null))),R===(R=S(q))&&$?$.p(q,B):($.d(1),$=R(q),$&&($.c(),$.m(i,null))),B&2&&y!==(y=q[1]?"Hide":"Show")&&Ee(P,y)},i:C,o:C,d(q){q&&u(e),D.d(),$.d(),m=!1,g()}}}function Jt(n,e,t){let{LEDPassword:r}=e,s=!1;function a(){r[0]=this.value,t(0,r)}function o(){r[0]=this.value,t(0,r)}function f(){r[1]=this.value,t(0,r)}function i(){r[1]=this.value,t(0,r)}const c=()=>t(1,s=!s);return n.$$set=d=>{"LEDPassword"in d&&t(0,r=d.LEDPassword)},[r,s,a,o,f,i,c]}class Yt extends re{constructor(e){super(),ne(this,e,Jt,Ft,se,{LEDPassword:0})}}function Zt(n){let e,t,r,s,a,o,f,i;return{c(){e=h("div"),t=h("button"),r=k("New Account"),s=N(),a=h("div"),o=k("Note: Backup your current key first!"),this.h()},l(c){e=p(c,"DIV",{});var d=_(e);t=p(d,"BUTTON",{class:!0});var V=_(t);r=I(V,"New Account"),V.forEach(u),s=U(d),a=p(d,"DIV",{});var E=_(a);o=I(E,"Note: Backup your current key first!"),E.forEach(u),d.forEach(u),this.h()},h(){b(t,"class","rounded border-gray-800 border-solid border w-36 py-2 my-3 hover:bg-gray-200 active:bg-gray-300")},m(c,d){L(c,e,d),l(e,t),l(t,r),l(e,s),l(e,a),l(a,o),f||(i=M(t,"click",n[1]),f=!0)},p:C,i:C,o:C,d(c){c&&u(e),f=!1,i()}}}function Xt(n){const e=$e();return[e,()=>e("click")]}class xt extends re{constructor(e){super(),ne(this,e,Xt,Zt,se,{})}}function Et(n,e,t){const r=n.slice();return r[18]=e[t],r[19]=e,r[20]=t,r}function kt(n){let e,t,r,s,a,o,f,i,c,d,V,E,A,v;function y(w,D){return w[2]?tr:er}let P=y(n),m=P(n),g=n[5],O=[];for(let w=0;w<g.length;w+=1)O[w]=It(Et(n,g,w));return{c(){e=h("div"),t=h("button"),r=k("Back"),s=N(),a=h("div"),o=h("button"),f=k("Clone"),i=N(),m.c(),c=N(),d=h("input"),V=N(),E=h("div");for(let w=0;w<O.length;w+=1)O[w].c();this.h()},l(w){e=p(w,"DIV",{class:!0});var D=_(e);t=p(D,"BUTTON",{class:!0});var S=_(t);r=I(S,"Back"),S.forEach(u),s=U(D),a=p(D,"DIV",{class:!0});var R=_(a);o=p(R,"BUTTON",{class:!0});var $=_(o);f=I($,"Clone"),$.forEach(u),i=U(R),m.l(R),R.forEach(u),D.forEach(u),c=U(w),d=p(w,"INPUT",{type:!0,class:!0}),V=U(w),E=p(w,"DIV",{class:!0});var q=_(E);for(let B=0;B<O.length;B+=1)O[B].l(q);q.forEach(u),this.h()},h(){b(t,"class","text-base md:hidden rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300"),b(o,"class","text-base rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300 mx-2"),b(a,"class","flex md:flex-row-reverse"),b(e,"class","flex justify-between"),b(d,"type","text"),b(d,"class","focus:outline-none text-2xl w-full py-3"),d.disabled=n[0],b(E,"class","pl-10")},m(w,D){L(w,e,D),l(e,t),l(t,r),l(e,s),l(e,a),l(a,o),l(o,f),l(a,i),m.m(a,null),L(w,c,D),L(w,d,D),J(d,n[1].name),L(w,V,D),L(w,E,D);for(let S=0;S<O.length;S+=1)O[S].m(E,null);A||(v=[M(t,"click",n[9]),M(o,"click",n[10]),M(d,"input",n[14]),M(d,"input",n[6])],A=!0)},p(w,D){if(P===(P=y(w))&&m?m.p(w,D):(m.d(1),m=P(w),m&&(m.c(),m.m(a,null))),D&1&&(d.disabled=w[0]),D&2&&d.value!==w[1].name&&J(d,w[1].name),D&107){g=w[5];let S;for(S=0;S<g.length;S+=1){const R=Et(w,g,S);O[S]?O[S].p(R,D):(O[S]=It(R),O[S].c(),O[S].m(E,null))}for(;S<O.length;S+=1)O[S].d(1);O.length=g.length}},d(w){w&&u(e),m.d(),w&&u(c),w&&u(d),w&&u(V),w&&u(E),Xe(O,w),A=!1,qe(v)}}}function er(n){let e,t,r,s;return{c(){e=h("button"),t=k("Delete"),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var o=_(e);t=I(o,"Delete"),o.forEach(u),this.h()},h(){b(e,"class","text-base rounded border-gray-800 border-solid border py-1 px-3 mb-4 hover:bg-gray-200 active:bg-gray-300 disabled:hover:bg-white disabled:border-gray-500 disabled:text-gray-500"),e.disabled=n[0]},m(a,o){L(a,e,o),l(e,t),r||(s=M(e,"click",n[13]),r=!0)},p(a,o){o&1&&(e.disabled=a[0])},d(a){a&&u(e),r=!1,s()}}}function tr(n){let e,t,r,s,a,o,f;return{c(){e=h("button"),t=k("Confirm Delete"),r=N(),s=h("button"),a=k("Cancel Delete"),this.h()},l(i){e=p(i,"BUTTON",{class:!0});var c=_(e);t=I(c,"Confirm Delete"),c.forEach(u),r=U(i),s=p(i,"BUTTON",{class:!0});var d=_(s);a=I(d,"Cancel Delete"),d.forEach(u),this.h()},h(){b(e,"class","text-base rounded border-solid border py-1 px-3 mb-4 mx-2 hover:bg-gray-200 active:bg-gray-300"),b(s,"class","text-base rounded border-solid border py-1 px-3 mb-4 mx-2 hover:bg-gray-200 active:bg-gray-300")},m(i,c){L(i,e,c),l(e,t),L(i,r,c),L(i,s,c),l(s,a),o||(f=[M(e,"click",n[11]),M(s,"click",n[12])],o=!0)},p:C,d(i){i&&u(e),i&&u(r),i&&u(s),o=!1,qe(f)}}}function It(n){let e,t,r=n[18]+"",s,a,o,f,i,c=n[1][n[18]]+"",d,V,E,A=n[3][n[18]]+"",v,y,P;function m(){n[15].call(o,n[18])}return{c(){e=h("div"),t=h("label"),s=k(r),a=k(" = "),o=h("input"),f=N(),i=h("pre"),d=k(c),V=N(),E=h("pre"),v=k(A),this.h()},l(g){e=p(g,"DIV",{class:!0});var O=_(e);t=p(O,"LABEL",{for:!0});var w=_(t);s=I(w,r),a=I(w," = "),w.forEach(u),o=p(O,"INPUT",{name:!0,class:!0,type:!0,autocomplete:!0,autocorrect:!0,autocapitalize:!0,spellcheck:!0}),O.forEach(u),f=U(g),i=p(g,"PRE",{class:!0});var D=_(i);d=I(D,c),D.forEach(u),V=U(g),E=p(g,"PRE",{});var S=_(E);v=I(S,A),S.forEach(u),this.h()},h(){b(t,"for",n[18]),b(o,"name",n[18]),b(o,"class","pl-4 font-mono focus:outline-none w-full"),b(o,"type","text"),b(o,"autocomplete","off"),b(o,"autocorrect","off"),b(o,"autocapitalize","off"),b(o,"spellcheck","false"),o.disabled=n[0],b(e,"class","flex whitespace-nowrap py-2"),b(i,"class","h-0 invisible")},m(g,O){L(g,e,O),l(e,t),l(t,s),l(t,a),l(e,o),J(o,n[1][n[18]]),L(g,f,O),L(g,i,O),l(i,d),L(g,V,O),L(g,E,O),l(E,v),y||(P=[M(o,"input",m),M(o,"input",n[6])],y=!0)},p(g,O){n=g,O&1&&(o.disabled=n[0]),O&34&&o.value!==n[1][n[18]]&&J(o,n[1][n[18]]),O&2&&c!==(c=n[1][n[18]]+"")&&Ee(d,c),O&8&&A!==(A=n[3][n[18]]+"")&&Ee(v,A)},d(g){g&&u(e),g&&u(f),g&&u(i),g&&u(V),g&&u(E),y=!1,qe(P)}}}function rr(n){let e,t=n[1]&&kt(n);return{c(){e=h("div"),t&&t.c(),this.h()},l(r){e=p(r,"DIV",{class:!0});var s=_(e);t&&t.l(s),s.forEach(u),this.h()},h(){b(e,"class","flex flex-col")},m(r,s){L(r,e,s),t&&t.m(e,null)},p(r,[s]){r[1]?t?t.p(r,s):(t=kt(r),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:C,o:C,d(r){r&&u(e),t&&t.d()}}}function nr(n,e,t){let{patterns:r}=e,{currentPatternId:s}=e,{disabled:a=!1}=e,o,f=$e(),i=!1,c=["h","s","v"];const d={h:"",s:"",v:""};let V;const E=()=>{if(!!o)for(let D of c){const{error:S}=Se(o[D]);S?t(3,d[D]=S,d):t(3,d[D]="",d)}},A=()=>{!o||(E(),clearTimeout(V),V=setTimeout(()=>f("edit",o),500))},v=()=>f("back"),y=()=>f("newPattern",{...o,id:Vt()}),P=()=>{t(2,i=!1),f("remove",o)},m=()=>t(2,i=!1),g=()=>t(2,i=!0);function O(){o.name=this.value,t(1,o),t(7,r),t(8,s)}function w(D){o[D]=this.value,t(1,o),t(7,r),t(8,s)}return n.$$set=D=>{"patterns"in D&&t(7,r=D.patterns),"currentPatternId"in D&&t(8,s=D.currentPatternId),"disabled"in D&&t(0,a=D.disabled)},n.$$.update=()=>{n.$$.dirty&384&&t(1,o=r.find(D=>D.id===s)),n.$$.dirty&2&&o&&E()},[a,o,i,d,f,c,A,r,s,v,y,P,m,g,O,w]}class sr extends re{constructor(e){super(),ne(this,e,nr,rr,se,{patterns:7,currentPatternId:8,disabled:0})}}function ar(n){let e,t,r,s;return{c(){e=h("button"),t=k("Refresh Key"),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var o=_(e);t=I(o,"Refresh Key"),o.forEach(u),this.h()},h(){b(e,"class","rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300")},m(a,o){L(a,e,o),l(e,t),r||(s=M(e,"click",n[4]),r=!0)},p:C,d(a){a&&u(e),r=!1,s()}}}function or(n){let e,t,r,s,a,o,f,i,c,d,V;return{c(){e=h("div"),t=h("button"),r=k("Cancel"),s=N(),a=h("button"),o=k("Confirm"),f=N(),i=h("div"),c=k("Note: Refreshing your key logs you out of all devices"),this.h()},l(E){e=p(E,"DIV",{class:!0});var A=_(e);t=p(A,"BUTTON",{class:!0});var v=_(t);r=I(v,"Cancel"),v.forEach(u),s=U(A),a=p(A,"BUTTON",{class:!0});var y=_(a);o=I(y,"Confirm"),y.forEach(u),A.forEach(u),f=U(E),i=p(E,"DIV",{});var P=_(i);c=I(P,"Note: Refreshing your key logs you out of all devices"),P.forEach(u),this.h()},h(){b(t,"class","rounded border-gray-800 border-solid border w-36 py-2 mr-4 hover:bg-gray-200 active:bg-gray-300"),b(a,"class","rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300"),b(e,"class","flex")},m(E,A){L(E,e,A),l(e,t),l(t,r),l(e,s),l(e,a),l(a,o),L(E,f,A),L(E,i,A),l(i,c),d||(V=[M(t,"click",n[3]),M(a,"click",n[1])],d=!0)},p:C,d(E){E&&u(e),E&&u(f),E&&u(i),d=!1,qe(V)}}}function lr(n){let e;function t(a,o){return a[0]?or:ar}let r=t(n),s=r(n);return{c(){e=h("div"),s.c()},l(a){e=p(a,"DIV",{});var o=_(e);s.l(o),o.forEach(u)},m(a,o){L(a,e,o),s.m(e,null)},p(a,[o]){r===(r=t(a))&&s?s.p(a,o):(s.d(1),s=r(a),s&&(s.c(),s.m(e,null)))},i:C,o:C,d(a){a&&u(e),s.d()}}}function ir(n,e,t){let{key:r}=e,s=!1;const a=$e(),o=async()=>{t(0,s=!1);const d=await(await fetch(`https://leds.spry.workers.dev/new-pass?key=${r}`,{method:"POST"})).json();d.key&&a("newKey",d.key)},f=()=>{t(0,s=!1)},i=()=>t(0,s=!0);return n.$$set=c=>{"key"in c&&t(2,r=c.key)},[s,o,r,f,i]}class ur extends re{constructor(e){super(),ne(this,e,ir,lr,se,{key:2})}}function cr(n){let e,t,r,s;return{c(){e=h("button"),t=k("Reload Page"),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var o=_(e);t=I(o,"Reload Page"),o.forEach(u),this.h()},h(){b(e,"class","text-1xl mt-20 rounded border-gray-800 border-solid border w-36 py-2 hover:bg-gray-200 active:bg-gray-300")},m(a,o){L(a,e,o),l(e,t),r||(s=M(e,"click",n[0]),r=!0)},p:C,i:C,o:C,d(a){a&&u(e),r=!1,s()}}}function dr(n){return[()=>location.reload()]}class fr extends re{constructor(e){super(),ne(this,e,dr,cr,se,{})}}function hr(n){let e,t,r,s,a,o,f,i,c,d,V,E,A,v,y,P;return{c(){e=h("div"),t=h("label"),r=k("Key"),s=N(),a=h("input"),o=N(),f=h("div"),i=k(n[0]),c=N(),d=h("button"),V=k("Set Key"),E=N(),A=h("div"),v=k("Note: Setting the key allows you to change accounts (remember to save your old key somewhere!)"),this.h()},l(m){e=p(m,"DIV",{class:!0});var g=_(e);t=p(g,"LABEL",{for:!0});var O=_(t);r=I(O,"Key"),O.forEach(u),s=U(g),a=p(g,"INPUT",{class:!0,name:!0}),g.forEach(u),o=U(m),f=p(m,"DIV",{class:!0});var w=_(f);i=I(w,n[0]),w.forEach(u),c=U(m),d=p(m,"BUTTON",{class:!0});var D=_(d);V=I(D,"Set Key"),D.forEach(u),E=U(m),A=p(m,"DIV",{});var S=_(A);v=I(S,"Note: Setting the key allows you to change accounts (remember to save your old key somewhere!)"),S.forEach(u),this.h()},h(){b(t,"for","key"),b(a,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(a,"name","key"),b(e,"class","flex"),b(f,"class","text-sm text-red-800"),b(d,"class","rounded border-gray-800 border-solid border w-36 py-2 my-3 hover:bg-gray-200 active:bg-gray-300")},m(m,g){L(m,e,g),l(e,t),l(t,r),l(e,s),l(e,a),J(a,n[1]),L(m,o,g),L(m,f,g),l(f,i),L(m,c,g),L(m,d,g),l(d,V),L(m,E,g),L(m,A,g),l(A,v),y||(P=[M(a,"input",n[3]),M(d,"click",n[4])],y=!0)},p(m,[g]){g&2&&a.value!==m[1]&&J(a,m[1]),g&1&&Ee(i,m[0])},i:C,o:C,d(m){m&&u(e),m&&u(o),m&&u(f),m&&u(c),m&&u(d),m&&u(E),m&&u(A),y=!1,qe(P)}}}function pr(n,e,t){let r="",s="";const a=$e(),o=async()=>{if(s.length!==25){t(0,r="Key must be 25 characters long");return}const d=await(await fetch(`https://leds.spry.workers.dev/get-username?key=${s}`,{method:"GET"})).json();d.username?(a("newKey",s),t(0,r=""),t(1,s="")):t(0,r=d.error)};function f(){s=this.value,t(1,s)}return[r,s,o,f,()=>o()]}class mr extends re{constructor(e){super(),ne(this,e,pr,hr,se,{})}}function br(n){let e,t,r,s,a,o,f,i,c,d,V,E,A,v;return{c(){e=h("div"),t=h("div"),r=h("label"),s=k("Username"),a=N(),o=h("input"),f=N(),i=h("div"),c=k(n[1]),d=N(),V=h("button"),E=k("Set Username"),this.h()},l(y){e=p(y,"DIV",{class:!0});var P=_(e);t=p(P,"DIV",{class:!0});var m=_(t);r=p(m,"LABEL",{for:!0});var g=_(r);s=I(g,"Username"),g.forEach(u),a=U(m),o=p(m,"INPUT",{class:!0,name:!0}),m.forEach(u),f=U(P),i=p(P,"DIV",{class:!0});var O=_(i);c=I(O,n[1]),O.forEach(u),d=U(P),V=p(P,"BUTTON",{class:!0});var w=_(V);E=I(w,"Set Username"),w.forEach(u),P.forEach(u),this.h()},h(){b(r,"for","username"),b(o,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(o,"name","username"),b(t,"class","flex"),b(i,"class","text-sm text-red-800"),b(V,"class","rounded border-gray-800 border-solid border w-36 py-2 my-3 hover:bg-gray-200 active:bg-gray-300"),b(e,"class","flex flex-col")},m(y,P){L(y,e,P),l(e,t),l(t,r),l(r,s),l(t,a),l(t,o),J(o,n[0]),l(e,f),l(e,i),l(i,c),l(e,d),l(e,V),l(V,E),A||(v=[M(o,"input",n[4]),M(V,"click",n[5])],A=!0)},p(y,[P]){P&1&&o.value!==y[0]&&J(o,y[0]),P&2&&Ee(c,y[1])},i:C,o:C,d(y){y&&u(e),A=!1,qe(v)}}}function _r(n,e,t){let{key:r}=e;const s=$e();let a="",o="";const f=async()=>{if(a==="")return;const V=await(await fetch(`https://leds.spry.workers.dev/set-username?key=${r}&username=${a}`,{method:"POST"})).json();V.success?(s("update"),t(1,o=""),t(0,a="")):t(1,o=V.error)};function i(){a=this.value,t(0,a)}const c=()=>f();return n.$$set=d=>{"key"in d&&t(3,r=d.key)},[a,o,f,r,i,c]}class yr extends re{constructor(e){super(),ne(this,e,_r,br,se,{key:3})}}const vr=(n,e,t)=>{var r=0,s=0,a=0,o,f,i,c,d;switch(o=Math.floor(n*6),f=n*6-o,i=t*(1-e),c=t*(1-f*e),d=t*(1-(1-f)*e),o%6){case 0:r=t,s=d,a=i;break;case 1:r=c,s=t,a=i;break;case 2:r=i,s=t,a=d;break;case 3:r=i,s=c,a=t;break;case 4:r=d,s=i,a=t;break;case 5:r=t,s=i,a=c;break}return{r:Math.round(r*255),g:Math.round(s*255),b:Math.round(a*255)}},Je=100;let Ot=0;const gr=[128,131,134,137,140,143,146,149,152,156,159,162,165,168,171,174,176,179,182,185,188,191,193,196,199,201,204,206,209,211,213,216,218,220,222,224,226,228,230,232,234,235,237,239,240,242,243,244,246,247,248,249,250,251,251,252,253,253,254,254,254,255,255,255,255,255,255,255,254,254,253,253,252,252,251,250,249,248,247,246,245,244,242,241,239,238,236,235,233,231,229,227,225,223,221,219,217,215,212,210,207,205,202,200,197,195,192,189,186,184,181,178,175,172,169,166,163,160,157,154,151,148,145,142,138,135,132,129,126,123,120,117,113,110,107,104,101,98,95,92,89,86,83,80,77,74,71,69,66,63,60,58,55,53,50,48,45,43,40,38,36,34,32,30,28,26,24,22,20,19,17,16,14,13,11,10,9,8,7,6,5,4,3,3,2,2,1,1,0,0,0,0,0,0,0,1,1,1,2,2,3,4,4,5,6,7,8,9,11,12,13,15,16,18,20,21,23,25,27,29,31,33,35,37,39,42,44,46,49,51,54,56,59,62,64,67,70,73,76,79,81,84,87,90,93,96,99,103,106,109,112,115,118,121,124],Ye=(n,e)=>{if(n.find(s=>Math.floor(s)!==s))throw new Error("Program contains non int");const t=[];let r=-1;for(let s=0;s<n.length;s++){switch(n[s]){case Q.SIN:t[r]=gr[t[r]%256];break;case Q.ADD:if(r--,r<0)return 1;t[r]=t[r]+t[r+1];break;case Q.SUB:if(r--,r<0)return 1;t[r]=t[r]-t[r+1];break;case Q.MUL:if(r--,r<0)return 1;t[r]=t[r]*t[r+1];break;case Q.DIV:if(r--,r<0)return 1;t[r]=Math.floor(t[r]/t[r+1]);break;case Q.POW:if(r--,r<0)return 1;t[r]=Math.pow(t[r],t[r+1]);break;case Q.MOD:if(r--,r<0)return 1;t[r]=t[r]%t[r+1];break;case Q.IF:if(r-=2,r<0)return 1;t[r]=t[r]?t[r+1]:t[r+2];break;case Q.EQ:if(r--,r<0)return 1;t[r]=+(t[r]==t[r+1]);break;case Q.GT:if(r--,r<0)return 1;t[r]=+(t[r]>t[r+1]);break;case Q.LT:if(r--,r<0)return 1;t[r]=+(t[r]<t[r+1]);break;case Q.AND:if(r--,r<0)return 1;t[r]=t[r]&t[r+1];break;case Q.OR:if(r--,r<0)return 1;t[r]=t[r]|t[r+1];break;case Q.VAL:if(r++,r>=Je)return 1;t[r]=n[s+1],s++;break;case Q.VAR_T:if(r++,r>=Je)return 1;t[r]=Ot;break;case Q.VAR_I:if(r++,r>=Je)return 1;t[r]=e;break;case Q.END:return t[0]}for(;t[r]<0;)t[r]+=2**32;for(;t[r]>=2**32;)t[r]-=2**32}return t[0]},wr=238,Er=(n,e,t,r,s)=>{Ot++;const a=[...new Array(wr)].map(i=>({h:0,s:0,v:0}));for(let i=0;i<a.length;i++)a[i].h=Ye(t,i)%256,a[i].s=Ye(r,i)%256,a[i].v=Ye(s,i)%256;a.reverse(),n.width=n.clientWidth;const o=n.width/a.length,f=Math.max(6,o);n.height=f,e.clearRect(0,0,n.width,n.height);for(let i=0;i<a.length;i++){const c=vr(a[i].h/255,a[i].s/255,a[i].v/255);e.fillStyle=`rgb(${c.r}, ${c.g}, ${c.b})`,e.fillRect(i*o,0,o,f)}return o};function kr(n){let e;return{c(){e=h("canvas"),this.h()},l(t){e=p(t,"CANVAS",{class:!0,height:!0}),_(e).forEach(u),this.h()},h(){b(e,"class","w-full"),b(e,"height","0")},m(t,r){L(t,e,r),n[3](e)},p:C,i:C,o:C,d(t){t&&u(e),n[3](null)}}}function Ir(n,e,t){let{patterns:r}=e,{currentPatternId:s}=e,a,o;setInterval(()=>{if(!a||!o)return;const{compiled:i}=Se(a.h),{compiled:c}=Se(a.s),{compiled:d}=Se(a.v);if(!i||!c||!d)return;const V=o.getContext("2d");!V||Er(o,V,i,c,d)},1e3/50);function f(i){Ze[i?"unshift":"push"](()=>{o=i,t(0,o)})}return n.$$set=i=>{"patterns"in i&&t(1,r=i.patterns),"currentPatternId"in i&&t(2,s=i.currentPatternId)},n.$$.update=()=>{n.$$.dirty&6&&(a=r.find(i=>i.id===s))},[o,r,s,f]}class Pr extends re{constructor(e){super(),ne(this,e,Ir,kr,se,{patterns:1,currentPatternId:2})}}function Dr(n){let e,t,r,s,a,o,f,i,c,d,V,E,A,v,y,P,m,g,O,w,D,S,R,$,q,B,G,de,H,Y,te,x,Z,F,_e,ae,ke,Le,ye,oe,Ne,ve,pe,fe,We,Be,K,Ge,Ae,T,z,j,me,he,Ie,be,Pe,De,ge,Ce,Te,je,Ke;return{c(){e=h("div"),t=h("h1"),r=k("Usage"),s=N(),a=h("p"),o=k('Add sets of equations using the "Add Equation" button.'),f=N(),i=h("p"),c=k(`Each set of equations contains an "h" equation, an "s" equation, and a "v" equation. Each
		equation corresponds to each part of the `),d=h("a"),V=k("HSV color"),E=k(" of the LED."),A=N(),v=h("p"),y=k(`Each equation is run every frame for every LED on the led strip, which allows you to create a
		LED pattern by using the equations.`),P=N(),m=h("p"),g=k("The equations look like normal math equations, for example, setting "),O=h("code"),w=k("h = i + t"),D=k(` and
		`),S=h("code"),R=k("s = 255"),$=k(`
		and `),q=h("code"),B=k("v = 90"),G=k(" will create a rainbow pattern across the led strip."),de=N(),H=h("p"),Y=k(`All numbers are integers and the values sent to the LEDs are mod 256 of the result of the
		equations. You can access two variables: `),te=h("code"),x=k("i"),Z=k(" and "),F=h("code"),_e=k("t"),ae=k(". "),ke=h("code"),Le=k("i"),ye=k(` is
		the index of the LED and `),oe=h("code"),Ne=k("t"),ve=k(" is the current frame, which increments by 1 every frame."),pe=N(),fe=h("p"),We=k(`I attempted to have expressions evaluated according to the order of operations, but I don't
		think I got it quite working, so I recommend using parenthesis if something doesn't seem right.`),Be=N(),K=h("p"),Ge=k("There are two functions that you can use. The first one is "),Ae=h("code"),T=k(`if([expr], [if not 0], [if 0])
		`),z=k(", which should be self-explanatory. The other one is "),j=h("code"),me=k("sin([value])"),he=k(`, which
		computes the sin of a value, but a full cycle is 0-255 instead of 0-2pi.`),Ie=N(),be=h("p"),Pe=k(`The video is a live stream of my LED lights running whatever equations are written here. If too
		many people use this, it could get crazy. When you type in an equation, it is automatically sent
		to the LED strip.`),De=N(),ge=h("p"),Ce=k(`This was a random project that I wanted to try. I'll probably set a password on it at some
		point, but I thought I'd let the whole world try it out first. It probably has a lot of bugs and
		I'm not planning to fix them all. I also wrote a `),Te=h("a"),je=k("blog post"),Ke=k(" explaining how everything works."),this.h()},l(Ve){e=p(Ve,"DIV",{class:!0});var W=_(e);t=p(W,"H1",{});var xe=_(t);r=I(xe,"Usage"),xe.forEach(u),s=U(W),a=p(W,"P",{});var et=_(a);o=I(et,'Add sets of equations using the "Add Equation" button.'),et.forEach(u),f=U(W),i=p(W,"P",{});var Qe=_(i);c=I(Qe,`Each set of equations contains an "h" equation, an "s" equation, and a "v" equation. Each
		equation corresponds to each part of the `),d=p(Qe,"A",{href:!0});var tt=_(d);V=I(tt,"HSV color"),tt.forEach(u),E=I(Qe," of the LED."),Qe.forEach(u),A=U(W),v=p(W,"P",{});var rt=_(v);y=I(rt,`Each equation is run every frame for every LED on the led strip, which allows you to create a
		LED pattern by using the equations.`),rt.forEach(u),P=U(W),m=p(W,"P",{});var Oe=_(m);g=I(Oe,"The equations look like normal math equations, for example, setting "),O=p(Oe,"CODE",{});var nt=_(O);w=I(nt,"h = i + t"),nt.forEach(u),D=I(Oe,` and
		`),S=p(Oe,"CODE",{});var st=_(S);R=I(st,"s = 255"),st.forEach(u),$=I(Oe,`
		and `),q=p(Oe,"CODE",{});var at=_(q);B=I(at,"v = 90"),at.forEach(u),G=I(Oe," will create a rainbow pattern across the led strip."),Oe.forEach(u),de=U(W),H=p(W,"P",{});var we=_(H);Y=I(we,`All numbers are integers and the values sent to the LEDs are mod 256 of the result of the
		equations. You can access two variables: `),te=p(we,"CODE",{});var ot=_(te);x=I(ot,"i"),ot.forEach(u),Z=I(we," and "),F=p(we,"CODE",{});var lt=_(F);_e=I(lt,"t"),lt.forEach(u),ae=I(we,". "),ke=p(we,"CODE",{});var it=_(ke);Le=I(it,"i"),it.forEach(u),ye=I(we,` is
		the index of the LED and `),oe=p(we,"CODE",{});var ut=_(oe);Ne=I(ut,"t"),ut.forEach(u),ve=I(we," is the current frame, which increments by 1 every frame."),we.forEach(u),pe=U(W),fe=p(W,"P",{});var ct=_(fe);We=I(ct,`I attempted to have expressions evaluated according to the order of operations, but I don't
		think I got it quite working, so I recommend using parenthesis if something doesn't seem right.`),ct.forEach(u),Be=U(W),K=p(W,"P",{});var Me=_(K);Ge=I(Me,"There are two functions that you can use. The first one is "),Ae=p(Me,"CODE",{});var dt=_(Ae);T=I(dt,`if([expr], [if not 0], [if 0])
		`),dt.forEach(u),z=I(Me,", which should be self-explanatory. The other one is "),j=p(Me,"CODE",{});var ft=_(j);me=I(ft,"sin([value])"),ft.forEach(u),he=I(Me,`, which
		computes the sin of a value, but a full cycle is 0-255 instead of 0-2pi.`),Me.forEach(u),Ie=U(W),be=p(W,"P",{});var ht=_(be);Pe=I(ht,`The video is a live stream of my LED lights running whatever equations are written here. If too
		many people use this, it could get crazy. When you type in an equation, it is automatically sent
		to the LED strip.`),ht.forEach(u),De=U(W),ge=p(W,"P",{});var Fe=_(ge);Ce=I(Fe,`This was a random project that I wanted to try. I'll probably set a password on it at some
		point, but I thought I'd let the whole world try it out first. It probably has a lot of bugs and
		I'm not planning to fix them all. I also wrote a `),Te=p(Fe,"A",{href:!0});var pt=_(Te);je=I(pt,"blog post"),pt.forEach(u),Ke=I(Fe," explaining how everything works."),Fe.forEach(u),W.forEach(u),this.h()},h(){b(d,"href","https://en.wikipedia.org/wiki/HSL_and_HSV"),b(Te,"href","https://anb.codes/2022/led-equations"),b(e,"class","prose")},m(Ve,W){L(Ve,e,W),l(e,t),l(t,r),l(e,s),l(e,a),l(a,o),l(e,f),l(e,i),l(i,c),l(i,d),l(d,V),l(i,E),l(e,A),l(e,v),l(v,y),l(e,P),l(e,m),l(m,g),l(m,O),l(O,w),l(m,D),l(m,S),l(S,R),l(m,$),l(m,q),l(q,B),l(m,G),l(e,de),l(e,H),l(H,Y),l(H,te),l(te,x),l(H,Z),l(H,F),l(F,_e),l(H,ae),l(H,ke),l(ke,Le),l(H,ye),l(H,oe),l(oe,Ne),l(H,ve),l(e,pe),l(e,fe),l(fe,We),l(e,Be),l(e,K),l(K,Ge),l(K,Ae),l(Ae,T),l(K,z),l(K,j),l(j,me),l(K,he),l(e,Ie),l(e,be),l(be,Pe),l(e,De),l(e,ge),l(ge,Ce),l(ge,Te),l(Te,je),l(ge,Ke)},p:C,i:C,o:C,d(Ve){Ve&&u(e)}}}class Tr extends re{constructor(e){super(),ne(this,e,null,Dr,se,{})}}function Pt(n,e,t){const r=n.slice();return r[8]=e[t],r}function Dt(n){let e,t;return{c(){e=h("option"),this.h()},l(r){e=p(r,"OPTION",{}),_(e).forEach(u),this.h()},h(){e.__value=t=n[8],e.value=e.__value},m(r,s){L(r,e,s)},p(r,s){s&4&&t!==(t=r[8])&&(e.__value=t,e.value=e.__value)},d(r){r&&u(e)}}}function Ar(n){let e,t,r,s,a,o,f,i,c,d,V,E,A=n[2],v=[];for(let y=0;y<A.length;y+=1)v[y]=Dt(Pt(n,A,y));return{c(){e=h("div"),t=h("label"),r=k("View user"),s=N(),a=h("input"),o=N(),f=h("datalist");for(let y=0;y<v.length;y+=1)v[y].c();i=N(),c=h("div"),d=k(n[1]),this.h()},l(y){e=p(y,"DIV",{});var P=_(e);t=p(P,"LABEL",{for:!0});var m=_(t);r=I(m,"View user"),m.forEach(u),s=U(P),a=p(P,"INPUT",{name:!0,class:!0,placeholder:!0,type:!0,list:!0}),o=U(P),f=p(P,"DATALIST",{id:!0});var g=_(f);for(let w=0;w<v.length;w+=1)v[w].l(g);g.forEach(u),P.forEach(u),i=U(y),c=p(y,"DIV",{class:!0});var O=_(c);d=I(O,n[1]),O.forEach(u),this.h()},h(){b(t,"for","view-user"),b(a,"name","view-user"),b(a,"class","ml-4 border border-gray-800 border-solid rounded px-1"),b(a,"placeholder","username"),b(a,"type","search"),b(a,"list","users"),b(f,"id","users"),b(c,"class","text-sm text-red-800")},m(y,P){L(y,e,P),l(e,t),l(t,r),l(e,s),l(e,a),J(a,n[0]),l(e,o),l(e,f);for(let m=0;m<v.length;m+=1)v[m].m(f,null);L(y,i,P),L(y,c,P),l(c,d),V||(E=[M(a,"input",n[4]),M(a,"input",n[3])],V=!0)},p(y,[P]){if(P&1&&J(a,y[0]),P&4){A=y[2];let m;for(m=0;m<A.length;m+=1){const g=Pt(y,A,m);v[m]?v[m].p(g,P):(v[m]=Dt(g),v[m].c(),v[m].m(f,null))}for(;m<v.length;m+=1)v[m].d(1);v.length=A.length}P&2&&Ee(d,y[1])},i:C,o:C,d(y){y&&u(e),Xe(v,y),y&&u(i),y&&u(c),V=!1,qe(E)}}}function Vr(n,e,t){let r="",s="",a=[];const o=$e();At(async()=>{const V=await fetch("https://leds.spry.workers.dev/users");t(2,a=await V.json()),console.log(a)});const f=async()=>{var A,v;if(!a.includes(r)){t(1,s="User does not exist"),o("view",[]);return}const E=await(await fetch(`https://leds.spry.workers.dev/data?username=${r}`)).json();E.data?(o("view",(v=(A=JSON.parse(E.data))==null?void 0:A.patterns)!=null?v:[]),t(1,s="")):(o("view",[]),t(1,s=""))};let i;const c=()=>{clearTimeout(i),i=setTimeout(f,500)};function d(){r=this.value,t(0,r)}return[r,s,a,c,d]}class Or extends re{constructor(e){super(),ne(this,e,Vr,Ar,se,{})}}function Tt(n){let e,t;return e=new sr({props:{patterns:n[4]?n[0]:n[2],currentPatternId:n[3],disabled:n[4]}}),e.$on("edit",n[8]),e.$on("newPattern",n[6]),e.$on("remove",n[7]),e.$on("close",n[13]),{c(){le(e.$$.fragment)},l(r){ie(e.$$.fragment,r)},m(r,s){ue(e,r,s),t=!0},p(r,s){const a={};s&21&&(a.patterns=r[4]?r[0]:r[2]),s&8&&(a.currentPatternId=r[3]),s&16&&(a.disabled=r[4]),e.$set(a)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){ce(e,r)}}}function Lr(n){let e,t,r,s,a,o,f,i,c,d,V,E,A,v,y,P,m,g,O,w,D,S,R,$,q,B,G,de,H,Y,te,x,Z,F,_e,ae,ke,Le,ye,oe,Ne,ve,pe,fe;function We(T){n[12](T)}let Be={patterns:n[4]?n[0]:n[2]};n[3]!==void 0&&(Be.currentPatternId=n[3]),f=new Ht({props:Be}),Ze.push(()=>bt(f,"currentPatternId",We)),d=new Bt({props:{disabled:n[4]}}),d.$on("newPattern",n[6]);let K=n[3]!=""&&Tt(n);y=new Pr({props:{patterns:n[4]?n[0]:n[2],currentPatternId:n[3]}}),g=new ur({props:{key:n[1]}}),g.$on("newKey",n[9]),D=new mr({}),D.$on("newKey",n[9]),$=new yr({props:{key:n[1]}}),$.$on("update",n[14]),G=new xt({}),G.$on("click",n[11]),Y=new St({props:{key:n[1]}}),Z=new Or({}),Z.$on("view",n[10]);function Ge(T){n[15](T)}let Ae={};return n[5]!==void 0&&(Ae.LEDPassword=n[5]),ae=new Yt({props:Ae}),Ze.push(()=>bt(ae,"LEDPassword",Ge)),oe=new Tr({}),pe=new fr({}),{c(){e=h("header"),t=k("LEDS"),r=N(),s=h("main"),a=h("div"),o=h("div"),le(f.$$.fragment),c=N(),le(d.$$.fragment),V=N(),E=h("div"),K&&K.c(),A=N(),v=h("div"),le(y.$$.fragment),P=N(),m=h("div"),le(g.$$.fragment),O=N(),w=h("div"),le(D.$$.fragment),S=N(),R=h("div"),le($.$$.fragment),q=N(),B=h("div"),le(G.$$.fragment),de=N(),H=h("div"),le(Y.$$.fragment),te=N(),x=h("div"),le(Z.$$.fragment),F=N(),_e=h("div"),le(ae.$$.fragment),Le=N(),ye=h("div"),le(oe.$$.fragment),Ne=N(),ve=h("div"),le(pe.$$.fragment),this.h()},l(T){e=p(T,"HEADER",{class:!0});var z=_(e);t=I(z,"LEDS"),z.forEach(u),r=U(T),s=p(T,"MAIN",{class:!0});var j=_(s);a=p(j,"DIV",{class:!0});var me=_(a);o=p(me,"DIV",{class:!0});var he=_(o);ie(f.$$.fragment,he),c=U(he),ie(d.$$.fragment,he),he.forEach(u),V=U(me),E=p(me,"DIV",{class:!0});var Ie=_(E);K&&K.l(Ie),Ie.forEach(u),me.forEach(u),A=U(j),v=p(j,"DIV",{class:!0});var be=_(v);ie(y.$$.fragment,be),be.forEach(u),P=U(j),m=p(j,"DIV",{class:!0});var Pe=_(m);ie(g.$$.fragment,Pe),Pe.forEach(u),O=U(j),w=p(j,"DIV",{class:!0});var De=_(w);ie(D.$$.fragment,De),De.forEach(u),S=U(j),R=p(j,"DIV",{class:!0});var ge=_(R);ie($.$$.fragment,ge),ge.forEach(u),q=U(j),B=p(j,"DIV",{class:!0});var Ce=_(B);ie(G.$$.fragment,Ce),Ce.forEach(u),de=U(j),H=p(j,"DIV",{class:!0});var Te=_(H);ie(Y.$$.fragment,Te),Te.forEach(u),te=U(j),x=p(j,"DIV",{class:!0});var je=_(x);ie(Z.$$.fragment,je),je.forEach(u),F=U(j),_e=p(j,"DIV",{class:!0});var Ke=_(_e);ie(ae.$$.fragment,Ke),Ke.forEach(u),Le=U(j),ye=p(j,"DIV",{class:!0});var Ve=_(ye);ie(oe.$$.fragment,Ve),Ve.forEach(u),Ne=U(j),ve=p(j,"DIV",{class:!0});var W=_(ve);ie(pe.$$.fragment,W),W.forEach(u),j.forEach(u),this.h()},h(){b(e,"class","pb-10 p-5 text-5xl"),b(o,"class","md:flex flex-col flex-shrink-0 text-2xl w-full md:w-[300px] md:border-r border-gray-800 border-solid pr-4"),He(o,"hidden",n[3]!=""),He(o,"flex",n[3]==""),b(E,"class","pl-5 flex-grow"),b(a,"class","flex"),b(v,"class","my-8"),b(m,"class","my-8"),b(w,"class","my-8"),b(R,"class","my-8"),b(B,"class","my-8"),b(H,"class","my-8"),b(x,"class","my-8"),b(_e,"class","my-8"),b(ye,"class","my-8"),b(ve,"class","my-8"),b(s,"class","p-5")},m(T,z){L(T,e,z),l(e,t),L(T,r,z),L(T,s,z),l(s,a),l(a,o),ue(f,o,null),l(o,c),ue(d,o,null),l(a,V),l(a,E),K&&K.m(E,null),l(s,A),l(s,v),ue(y,v,null),l(s,P),l(s,m),ue(g,m,null),l(s,O),l(s,w),ue(D,w,null),l(s,S),l(s,R),ue($,R,null),l(s,q),l(s,B),ue(G,B,null),l(s,de),l(s,H),ue(Y,H,null),l(s,te),l(s,x),ue(Z,x,null),l(s,F),l(s,_e),ue(ae,_e,null),l(s,Le),l(s,ye),ue(oe,ye,null),l(s,Ne),l(s,ve),ue(pe,ve,null),fe=!0},p(T,[z]){const j={};z&21&&(j.patterns=T[4]?T[0]:T[2]),!i&&z&8&&(i=!0,j.currentPatternId=T[3],_t(()=>i=!1)),f.$set(j);const me={};z&16&&(me.disabled=T[4]),d.$set(me),(!fe||z&8)&&He(o,"hidden",T[3]!=""),(!fe||z&8)&&He(o,"flex",T[3]==""),T[3]!=""?K?(K.p(T,z),z&8&&X(K,1)):(K=Tt(T),K.c(),X(K,1),K.m(E,null)):K&&(Nt(),ee(K,1,1,()=>{K=null}),Lt());const he={};z&21&&(he.patterns=T[4]?T[0]:T[2]),z&8&&(he.currentPatternId=T[3]),y.$set(he);const Ie={};z&2&&(Ie.key=T[1]),g.$set(Ie);const be={};z&2&&(be.key=T[1]),$.$set(be);const Pe={};z&2&&(Pe.key=T[1]),Y.$set(Pe);const De={};!ke&&z&32&&(ke=!0,De.LEDPassword=T[5],_t(()=>ke=!1)),ae.$set(De)},i(T){fe||(X(f.$$.fragment,T),X(d.$$.fragment,T),X(K),X(y.$$.fragment,T),X(g.$$.fragment,T),X(D.$$.fragment,T),X($.$$.fragment,T),X(G.$$.fragment,T),X(Y.$$.fragment,T),X(Z.$$.fragment,T),X(ae.$$.fragment,T),X(oe.$$.fragment,T),X(pe.$$.fragment,T),fe=!0)},o(T){ee(f.$$.fragment,T),ee(d.$$.fragment,T),ee(K),ee(y.$$.fragment,T),ee(g.$$.fragment,T),ee(D.$$.fragment,T),ee($.$$.fragment,T),ee(G.$$.fragment,T),ee(Y.$$.fragment,T),ee(Z.$$.fragment,T),ee(ae.$$.fragment,T),ee(oe.$$.fragment,T),ee(pe.$$.fragment,T),fe=!1},d(T){T&&u(e),T&&u(r),T&&u(s),ce(f),ce(d),K&&K.d(),ce(y),ce(g),ce(D),ce($),ce(G),ce(Y),ce(Z),ce(ae),ce(oe),ce(pe)}}}function Nr(n,e,t){let r="",s=[],a="",o=[],f=!1,i=["",""];const c=async()=>{console.log("Saving patterns..."),await fetch(`https://leds.spry.workers.dev/data?key=${r}`,{method:"PUT",body:JSON.stringify({patterns:s}),headers:{"Content-Type":"application/json"}})},d=({detail:R})=>{t(2,s=[...s,R]),t(3,a=R.id),f&&t(0,o=[]),c()},V=({detail:R})=>{t(2,s=s.filter($=>$.id!==R.id)),c()},E=({detail:R})=>{const $=s.findIndex(q=>q.id===a);t(2,s[$]=R,s),c(),y(R)};let A,v=!1;const y=(R,$=!0)=>{if(!+i[0]||!+i[1])return;if(v){clearInterval(A),A=setInterval(()=>{v||(y(R,$),clearInterval(A))},100);return}const{compiled:q}=Se(R.h),{compiled:B}=Se(R.s),{compiled:G}=Se(R.v);if(!q||!B||!G)return;const de=new Uint32Array([+i[0],+i[1]]),H=new Uint32Array(q),Y=new Uint32Array(B),te=new Uint32Array(G),x=new Uint32Array([+$]),Z=new Uint32Array([Q.END,0]),F=new WebSocket("wss://home.anb.codes:13655");v=!0,F.addEventListener("open",()=>{console.log("Sending..."),F.send(de.buffer),F.send(x.buffer),F.send(H.buffer),F.send(Z.buffer),F.send(Y.buffer),F.send(Z.buffer),F.send(te.buffer),F.send(Z.buffer)}),F.addEventListener("close",()=>{v=!1,console.log("closed")})},P=({detail:R})=>{t(1,r=R),localStorage.setItem("key",R)},m=({detail:R})=>{t(0,o=R)},g=async()=>{console.log("Making new account...");const $=await(await fetch("https://leds.spry.workers.dev/new-user",{method:"POST"})).json();$.key&&(t(1,r=$.key),localStorage.setItem("key",r))};At(async()=>{var q,B;t(1,r=(q=localStorage.getItem("key"))!=null?q:""),r||await g();const $=await(await fetch(`https://leds.spry.workers.dev/data?key=${r}`)).json();if($.data){const G=JSON.parse($.data);t(2,s=(B=G==null?void 0:G.patterns)!=null?B:[])}});function O(R){a=R,t(3,a)}const w=()=>t(3,a=""),D=()=>t(1,r);function S(R){i=R,t(5,i)}return n.$$.update=()=>{n.$$.dirty&1&&t(4,f=o.length!==0)},[o,r,s,a,f,i,d,V,E,P,m,g,O,w,D,S]}class Rr extends re{constructor(e){super(),ne(this,e,Nr,Lr,se,{})}}export{Rr as default};
